(function(n,t){function i(t,i){var u,f,e,o=t.nodeName.toLowerCase();return"area"===o?(u=t.parentNode,f=u.name,!t.href||!f||u.nodeName.toLowerCase()!=="map")?!1:(e=n("img[usemap=#"+f+"]")[0],!!e&&r(e)):(/input|select|textarea|button|object/.test(o)?!t.disabled:"a"===o?t.href||i:i)&&r(t)}function r(t){return n.expr.filters.visible(t)&&!n(t).parents().andSelf().filter(function(){return n.css(this,"visibility")==="hidden"}).length}var u=0,f=/^ui-id-\d+$/;(n.ui=n.ui||{},n.ui.version)||(n.extend(n.ui,{version:"1.9.2",keyCode:{BACKSPACE:8,COMMA:188,DELETE:46,DOWN:40,END:35,ENTER:13,ESCAPE:27,HOME:36,LEFT:37,NUMPAD_ADD:107,NUMPAD_DECIMAL:110,NUMPAD_DIVIDE:111,NUMPAD_ENTER:108,NUMPAD_MULTIPLY:106,NUMPAD_SUBTRACT:109,PAGE_DOWN:34,PAGE_UP:33,PERIOD:190,RIGHT:39,SPACE:32,TAB:9,UP:38}}),n.fn.extend({_focus:n.fn.focus,focus:function(t,i){return typeof t=="number"?this.each(function(){var r=this;setTimeout(function(){n(r).focus();i&&i.call(r)},t)}):this._focus.apply(this,arguments)},scrollParent:function(){var t;return t=n.ui.ie&&/(static|relative)/.test(this.css("position"))||/absolute/.test(this.css("position"))?this.parents().filter(function(){return/(relative|absolute|fixed)/.test(n.css(this,"position"))&&/(auto|scroll)/.test(n.css(this,"overflow")+n.css(this,"overflow-y")+n.css(this,"overflow-x"))}).eq(0):this.parents().filter(function(){return/(auto|scroll)/.test(n.css(this,"overflow")+n.css(this,"overflow-y")+n.css(this,"overflow-x"))}).eq(0),/fixed/.test(this.css("position"))||!t.length?n(document):t},zIndex:function(i){if(i!==t)return this.css("zIndex",i);if(this.length)for(var r=n(this[0]),u,f;r.length&&r[0]!==document;){if(u=r.css("position"),(u==="absolute"||u==="relative"||u==="fixed")&&(f=parseInt(r.css("zIndex"),10),!isNaN(f)&&f!==0))return f;r=r.parent()}return 0},uniqueId:function(){return this.each(function(){this.id||(this.id="ui-id-"+ ++u)})},removeUniqueId:function(){return this.each(function(){f.test(this.id)&&n(this).removeAttr("id")})}}),n.extend(n.expr[":"],{data:n.expr.createPseudo?n.expr.createPseudo(function(t){return function(i){return!!n.data(i,t)}}):function(t,i,r){return!!n.data(t,r[3])},focusable:function(t){return i(t,!isNaN(n.attr(t,"tabindex")))},tabbable:function(t){var r=n.attr(t,"tabindex"),u=isNaN(r);return(u||r>=0)&&i(t,!u)}}),n(function(){var i=document.body,t=i.appendChild(t=document.createElement("div"));t.offsetHeight;n.extend(t.style,{minHeight:"100px",height:"auto",padding:0,borderWidth:0});n.support.minHeight=t.offsetHeight===100;n.support.selectstart="onselectstart"in t;i.removeChild(t).style.display="none"}),n("<a>").outerWidth(1).jquery||n.each(["Width","Height"],function(i,r){function e(t,i,r,u){return n.each(o,function(){i-=parseFloat(n.css(t,"padding"+this))||0;r&&(i-=parseFloat(n.css(t,"border"+this+"Width"))||0);u&&(i-=parseFloat(n.css(t,"margin"+this))||0)}),i}var o=r==="Width"?["Left","Right"]:["Top","Bottom"],u=r.toLowerCase(),f={innerWidth:n.fn.innerWidth,innerHeight:n.fn.innerHeight,outerWidth:n.fn.outerWidth,outerHeight:n.fn.outerHeight};n.fn["inner"+r]=function(i){return i===t?f["inner"+r].call(this):this.each(function(){n(this).css(u,e(this,i)+"px")})};n.fn["outer"+r]=function(t,i){return typeof t!="number"?f["outer"+r].call(this,t):this.each(function(){n(this).css(u,e(this,t,!0,i)+"px")})}}),n("<a>").data("a-b","a").removeData("a-b").data("a-b")&&(n.fn.removeData=function(t){return function(i){return arguments.length?t.call(this,n.camelCase(i)):t.call(this)}}(n.fn.removeData)),function(){var t=/msie ([\w.]+)/.exec(navigator.userAgent.toLowerCase())||[];n.ui.ie=t.length?!0:!1;n.ui.ie6=parseFloat(t[1],10)===6}(),n.fn.extend({disableSelection:function(){return this.bind((n.support.selectstart?"selectstart":"mousedown")+".ui-disableSelection",function(n){n.preventDefault()})},enableSelection:function(){return this.unbind(".ui-disableSelection")}}),n.extend(n.ui,{plugin:{add:function(t,i,r){var u,f=n.ui[t].prototype;for(u in r)f.plugins[u]=f.plugins[u]||[],f.plugins[u].push([i,r[u]])},call:function(n,t,i){var r,u=n.plugins[t];if(u&&n.element[0].parentNode&&n.element[0].parentNode.nodeType!==11)for(r=0;r<u.length;r++)n.options[u[r][0]]&&u[r][1].apply(n.element,i)}},contains:n.contains,hasScroll:function(t,i){if(n(t).css("overflow")==="hidden")return!1;var r=i&&i==="left"?"scrollLeft":"scrollTop",u=!1;return t[r]>0?!0:(t[r]=1,u=t[r]>0,t[r]=0,u)},isOverAxis:function(n,t,i){return n>t&&n<t+i},isOver:function(t,i,r,u,f,e){return n.ui.isOverAxis(t,r,f)&&n.ui.isOverAxis(i,u,e)}}))})(jQuery),function(n,t){var r=0,i=Array.prototype.slice,u=n.cleanData;n.cleanData=function(t){for(var i=0,r;(r=t[i])!=null;i++)try{n(r).triggerHandler("remove")}catch(f){}u(t)};n.widget=function(t,i,r){var o,f,u,s,e=t.split(".")[0];t=t.split(".")[1];o=e+"-"+t;r||(r=i,i=n.Widget);n.expr[":"][o.toLowerCase()]=function(t){return!!n.data(t,o)};n[e]=n[e]||{};f=n[e][t];u=n[e][t]=function(n,t){if(!this._createWidget)return new u(n,t);arguments.length&&this._createWidget(n,t)};n.extend(u,f,{version:r.version,_proto:n.extend({},r),_childConstructors:[]});s=new i;s.options=n.widget.extend({},s.options);n.each(r,function(t,u){n.isFunction(u)&&(r[t]=function(){var n=function(){return i.prototype[t].apply(this,arguments)},r=function(n){return i.prototype[t].apply(this,n)};return function(){var i=this._super,f=this._superApply,t;return this._super=n,this._superApply=r,t=u.apply(this,arguments),this._super=i,this._superApply=f,t}}())});u.prototype=n.widget.extend(s,{widgetEventPrefix:f?s.widgetEventPrefix:t},r,{constructor:u,namespace:e,widgetName:t,widgetBaseClass:o,widgetFullName:o});f?(n.each(f._childConstructors,function(t,i){var r=i.prototype;n.widget(r.namespace+"."+r.widgetName,u,i._proto)}),delete f._childConstructors):i._childConstructors.push(u);n.widget.bridge(t,u)};n.widget.extend=function(r){for(var o=i.call(arguments,1),e=0,s=o.length,u,f;e<s;e++)for(u in o[e])f=o[e][u],o[e].hasOwnProperty(u)&&f!==t&&(r[u]=n.isPlainObject(f)?n.isPlainObject(r[u])?n.widget.extend({},r[u],f):n.widget.extend({},f):f);return r};n.widget.bridge=function(r,u){var f=u.prototype.widgetFullName||r;n.fn[r]=function(e){var h=typeof e=="string",o=i.call(arguments,1),s=this;return e=!h&&o.length?n.widget.extend.apply(null,[e].concat(o)):e,h?this.each(function(){var i,u=n.data(this,f);return u?!n.isFunction(u[e])||e.charAt(0)==="_"?n.error("no such method '"+e+"' for "+r+" widget instance"):(i=u[e].apply(u,o),i!==u&&i!==t?(s=i&&i.jquery?s.pushStack(i.get()):i,!1):void 0):n.error("cannot call methods on "+r+" prior to initialization; attempted to call method '"+e+"'")}):this.each(function(){var t=n.data(this,f);t?t.option(e||{})._init():n.data(this,f,new u(e,this))}),s}};n.Widget=function(){};n.Widget._childConstructors=[];n.Widget.prototype={widgetName:"widget",widgetEventPrefix:"",defaultElement:"<div>",options:{disabled:!1,create:null},_createWidget:function(t,i){i=n(i||this.defaultElement||this)[0];this.element=n(i);this.uuid=r++;this.eventNamespace="."+this.widgetName+this.uuid;this.options=n.widget.extend({},this.options,this._getCreateOptions(),t);this.bindings=n();this.hoverable=n();this.focusable=n();i!==this&&(n.data(i,this.widgetName,this),n.data(i,this.widgetFullName,this),this._on(!0,this.element,{remove:function(n){n.target===i&&this.destroy()}}),this.document=n(i.style?i.ownerDocument:i.document||i),this.window=n(this.document[0].defaultView||this.document[0].parentWindow));this._create();this._trigger("create",null,this._getCreateEventData());this._init()},_getCreateOptions:n.noop,_getCreateEventData:n.noop,_create:n.noop,_init:n.noop,destroy:function(){this._destroy();this.element.unbind(this.eventNamespace).removeData(this.widgetName).removeData(this.widgetFullName).removeData(n.camelCase(this.widgetFullName));this.widget().unbind(this.eventNamespace).removeAttr("aria-disabled").removeClass(this.widgetFullName+"-disabled ui-state-disabled");this.bindings.unbind(this.eventNamespace);this.hoverable.removeClass("ui-state-hover");this.focusable.removeClass("ui-state-focus")},_destroy:n.noop,widget:function(){return this.element},option:function(i,r){var o=i,u,f,e;if(arguments.length===0)return n.widget.extend({},this.options);if(typeof i=="string")if(o={},u=i.split("."),i=u.shift(),u.length){for(f=o[i]=n.widget.extend({},this.options[i]),e=0;e<u.length-1;e++)f[u[e]]=f[u[e]]||{},f=f[u[e]];if(i=u.pop(),r===t)return f[i]===t?null:f[i];f[i]=r}else{if(r===t)return this.options[i]===t?null:this.options[i];o[i]=r}return this._setOptions(o),this},_setOptions:function(n){for(var t in n)this._setOption(t,n[t]);return this},_setOption:function(n,t){return this.options[n]=t,n==="disabled"&&(this.widget().toggleClass(this.widgetFullName+"-disabled ui-state-disabled",!!t).attr("aria-disabled",t),this.hoverable.removeClass("ui-state-hover"),this.focusable.removeClass("ui-state-focus")),this},enable:function(){return this._setOption("disabled",!1)},disable:function(){return this._setOption("disabled",!0)},_on:function(t,i,r){var f,u=this;typeof t!="boolean"&&(r=i,i=t,t=!1);r?(i=f=n(i),this.bindings=this.bindings.add(i)):(r=i,i=this.element,f=this.widget());n.each(r,function(r,e){function o(){if(t||u.options.disabled!==!0&&!n(this).hasClass("ui-state-disabled"))return(typeof e=="string"?u[e]:e).apply(u,arguments)}typeof e!="string"&&(o.guid=e.guid=e.guid||o.guid||n.guid++);var s=r.match(/^(\w+)\s*(.*)$/),h=s[1]+u.eventNamespace,c=s[2];c?f.delegate(c,h,o):i.bind(h,o)})},_off:function(n,t){t=(t||"").split(" ").join(this.eventNamespace+" ")+this.eventNamespace;n.unbind(t).undelegate(t)},_delay:function(n,t){function r(){return(typeof n=="string"?i[n]:n).apply(i,arguments)}var i=this;return setTimeout(r,t||0)},_hoverable:function(t){this.hoverable=this.hoverable.add(t);this._on(t,{mouseenter:function(t){n(t.currentTarget).addClass("ui-state-hover")},mouseleave:function(t){n(t.currentTarget).removeClass("ui-state-hover")}})},_focusable:function(t){this.focusable=this.focusable.add(t);this._on(t,{focusin:function(t){n(t.currentTarget).addClass("ui-state-focus")},focusout:function(t){n(t.currentTarget).removeClass("ui-state-focus")}})},_trigger:function(t,i,r){var u,f,e=this.options[t];if(r=r||{},i=n.Event(i),i.type=(t===this.widgetEventPrefix?t:this.widgetEventPrefix+t).toLowerCase(),i.target=this.element[0],f=i.originalEvent,f)for(u in f)u in i||(i[u]=f[u]);return this.element.trigger(i,r),!(n.isFunction(e)&&e.apply(this.element[0],[i].concat(r))===!1||i.isDefaultPrevented())}};n.each({show:"fadeIn",hide:"fadeOut"},function(t,i){n.Widget.prototype["_"+t]=function(r,u,f){typeof u=="string"&&(u={effect:u});var o,e=u?u===!0||typeof u=="number"?i:u.effect||i:t;u=u||{};typeof u=="number"&&(u={duration:u});o=!n.isEmptyObject(u);u.complete=f;u.delay&&r.delay(u.delay);o&&n.effects&&(n.effects.effect[e]||n.uiBackCompat!==!1&&n.effects[e])?r[t](u):e!==t&&r[e]?r[e](u.duration,u.easing,f):r.queue(function(i){n(this)[t]();f&&f.call(r[0]);i()})}});n.uiBackCompat!==!1&&(n.Widget.prototype._getCreateOptions=function(){return n.metadata&&n.metadata.get(this.element[0])[this.widgetName]})}(jQuery),function(n){var t=!1;n(document).mouseup(function(){t=!1});n.widget("ui.mouse",{version:"1.9.2",options:{cancel:"input,textarea,button,select,option",distance:1,delay:0},_mouseInit:function(){var t=this;this.element.bind("mousedown."+this.widgetName,function(n){return t._mouseDown(n)}).bind("click."+this.widgetName,function(i){if(!0===n.data(i.target,t.widgetName+".preventClickEvent"))return n.removeData(i.target,t.widgetName+".preventClickEvent"),i.stopImmediatePropagation(),!1});this.started=!1},_mouseDestroy:function(){this.element.unbind("."+this.widgetName);this._mouseMoveDelegate&&n(document).unbind("mousemove."+this.widgetName,this._mouseMoveDelegate).unbind("mouseup."+this.widgetName,this._mouseUpDelegate)},_mouseDown:function(i){if(!t){this._mouseStarted&&this._mouseUp(i);this._mouseDownEvent=i;var r=this,u=i.which===1,f=typeof this.options.cancel=="string"&&i.target.nodeName?n(i.target).closest(this.options.cancel).length:!1;return!u||f||!this._mouseCapture(i)?!0:(this.mouseDelayMet=!this.options.delay,this.mouseDelayMet||(this._mouseDelayTimer=setTimeout(function(){r.mouseDelayMet=!0},this.options.delay)),this._mouseDistanceMet(i)&&this._mouseDelayMet(i)&&(this._mouseStarted=this._mouseStart(i)!==!1,!this._mouseStarted))?(i.preventDefault(),!0):(!0===n.data(i.target,this.widgetName+".preventClickEvent")&&n.removeData(i.target,this.widgetName+".preventClickEvent"),this._mouseMoveDelegate=function(n){return r._mouseMove(n)},this._mouseUpDelegate=function(n){return r._mouseUp(n)},n(document).bind("mousemove."+this.widgetName,this._mouseMoveDelegate).bind("mouseup."+this.widgetName,this._mouseUpDelegate),i.preventDefault(),t=!0,!0)}},_mouseMove:function(t){return n.ui.ie&&!(document.documentMode>=9)&&!t.button?this._mouseUp(t):this._mouseStarted?(this._mouseDrag(t),t.preventDefault()):(this._mouseDistanceMet(t)&&this._mouseDelayMet(t)&&(this._mouseStarted=this._mouseStart(this._mouseDownEvent,t)!==!1,this._mouseStarted?this._mouseDrag(t):this._mouseUp(t)),!this._mouseStarted)},_mouseUp:function(t){return n(document).unbind("mousemove."+this.widgetName,this._mouseMoveDelegate).unbind("mouseup."+this.widgetName,this._mouseUpDelegate),this._mouseStarted&&(this._mouseStarted=!1,t.target===this._mouseDownEvent.target&&n.data(t.target,this.widgetName+".preventClickEvent",!0),this._mouseStop(t)),!1},_mouseDistanceMet:function(n){return Math.max(Math.abs(this._mouseDownEvent.pageX-n.pageX),Math.abs(this._mouseDownEvent.pageY-n.pageY))>=this.options.distance},_mouseDelayMet:function(){return this.mouseDelayMet},_mouseStart:function(){},_mouseDrag:function(){},_mouseStop:function(){},_mouseCapture:function(){return!0}})}(jQuery),function(n){n.widget("ui.draggable",n.ui.mouse,{version:"1.9.2",widgetEventPrefix:"drag",options:{addClasses:!0,appendTo:"parent",axis:!1,connectToSortable:!1,containment:!1,cursor:"auto",cursorAt:!1,grid:!1,handle:!1,helper:"original",iframeFix:!1,opacity:!1,refreshPositions:!1,revert:!1,revertDuration:500,scope:"default",scroll:!0,scrollSensitivity:20,scrollSpeed:20,snap:!1,snapMode:"both",snapTolerance:20,stack:!1,zIndex:!1},_create:function(){this.options.helper!="original"||/^(?:r|a|f)/.test(this.element.css("position"))||(this.element[0].style.position="relative");this.options.addClasses&&this.element.addClass("ui-draggable");this.options.disabled&&this.element.addClass("ui-draggable-disabled");this._mouseInit()},_destroy:function(){this.element.removeClass("ui-draggable ui-draggable-dragging ui-draggable-disabled");this._mouseDestroy()},_mouseCapture:function(t){var i=this.options;return this.helper||i.disabled||n(t.target).is(".ui-resizable-handle")?!1:(this.handle=this._getHandle(t),!this.handle)?!1:(n(i.iframeFix===!0?"iframe":i.iframeFix).each(function(){n('<div class="ui-draggable-iframeFix" style="background: #fff;"><\/div>').css({width:this.offsetWidth+"px",height:this.offsetHeight+"px",position:"absolute",opacity:"0.001",zIndex:1e3}).css(n(this).offset()).appendTo("body")}),!0)},_mouseStart:function(t){var i=this.options;return(this.helper=this._createHelper(t),this.helper.addClass("ui-draggable-dragging"),this._cacheHelperProportions(),n.ui.ddmanager&&(n.ui.ddmanager.current=this),this._cacheMargins(),this.cssPosition=this.helper.css("position"),this.scrollParent=this.helper.scrollParent(),this.offset=this.positionAbs=this.element.offset(),this.offset={top:this.offset.top-this.margins.top,left:this.offset.left-this.margins.left},n.extend(this.offset,{click:{left:t.pageX-this.offset.left,top:t.pageY-this.offset.top},parent:this._getParentOffset(),relative:this._getRelativeOffset()}),this.originalPosition=this.position=this._generatePosition(t),this.originalPageX=t.pageX,this.originalPageY=t.pageY,i.cursorAt&&this._adjustOffsetFromHelper(i.cursorAt),i.containment&&this._setContainment(),this._trigger("start",t)===!1)?(this._clear(),!1):(this._cacheHelperProportions(),n.ui.ddmanager&&!i.dropBehaviour&&n.ui.ddmanager.prepareOffsets(this,t),this._mouseDrag(t,!0),n.ui.ddmanager&&n.ui.ddmanager.dragStart(this,t),!0)},_mouseDrag:function(t,i){if(this.position=this._generatePosition(t),this.positionAbs=this._convertPositionTo("absolute"),!i){var r=this._uiHash();if(this._trigger("drag",t,r)===!1)return this._mouseUp({}),!1;this.position=r.position}return this.options.axis&&this.options.axis=="y"||(this.helper[0].style.left=this.position.left+"px"),this.options.axis&&this.options.axis=="x"||(this.helper[0].style.top=this.position.top+"px"),n.ui.ddmanager&&n.ui.ddmanager.drag(this,t),!1},_mouseStop:function(t){var i=!1,r,u,f;for(n.ui.ddmanager&&!this.options.dropBehaviour&&(i=n.ui.ddmanager.drop(this,t)),this.dropped&&(i=this.dropped,this.dropped=!1),r=this.element[0],u=!1;r&&(r=r.parentNode);)r==document&&(u=!0);return!u&&this.options.helper==="original"?!1:(this.options.revert=="invalid"&&!i||this.options.revert=="valid"&&i||this.options.revert===!0||n.isFunction(this.options.revert)&&this.options.revert.call(this.element,i)?(f=this,n(this.helper).animate(this.originalPosition,parseInt(this.options.revertDuration,10),function(){f._trigger("stop",t)!==!1&&f._clear()})):this._trigger("stop",t)!==!1&&this._clear(),!1)},_mouseUp:function(t){return n("div.ui-draggable-iframeFix").each(function(){this.parentNode.removeChild(this)}),n.ui.ddmanager&&n.ui.ddmanager.dragStop(this,t),n.ui.mouse.prototype._mouseUp.call(this,t)},cancel:function(){return this.helper.is(".ui-draggable-dragging")?this._mouseUp({}):this._clear(),this},_getHandle:function(t){var i=!this.options.handle||!n(this.options.handle,this.element).length?!0:!1;return n(this.options.handle,this.element).find("*").andSelf().each(function(){this==t.target&&(i=!0)}),i},_createHelper:function(t){var r=this.options,i=n.isFunction(r.helper)?n(r.helper.apply(this.element[0],[t])):r.helper=="clone"?this.element.clone().removeAttr("id"):this.element;return i.parents("body").length||i.appendTo(r.appendTo=="parent"?this.element[0].parentNode:r.appendTo),i[0]==this.element[0]||/(fixed|absolute)/.test(i.css("position"))||i.css("position","absolute"),i},_adjustOffsetFromHelper:function(t){typeof t=="string"&&(t=t.split(" "));n.isArray(t)&&(t={left:+t[0],top:+t[1]||0});"left"in t&&(this.offset.click.left=t.left+this.margins.left);"right"in t&&(this.offset.click.left=this.helperProportions.width-t.right+this.margins.left);"top"in t&&(this.offset.click.top=t.top+this.margins.top);"bottom"in t&&(this.offset.click.top=this.helperProportions.height-t.bottom+this.margins.top)},_getParentOffset:function(){this.offsetParent=this.helper.offsetParent();var t=this.offsetParent.offset();return this.cssPosition=="absolute"&&this.scrollParent[0]!=document&&n.contains(this.scrollParent[0],this.offsetParent[0])&&(t.left+=this.scrollParent.scrollLeft(),t.top+=this.scrollParent.scrollTop()),(this.offsetParent[0]==document.body||this.offsetParent[0].tagName&&this.offsetParent[0].tagName.toLowerCase()=="html"&&n.ui.ie)&&(t={top:0,left:0}),{top:t.top+(parseInt(this.offsetParent.css("borderTopWidth"),10)||0),left:t.left+(parseInt(this.offsetParent.css("borderLeftWidth"),10)||0)}},_getRelativeOffset:function(){if(this.cssPosition=="relative"){var n=this.element.position();return{top:n.top-(parseInt(this.helper.css("top"),10)||0)+this.scrollParent.scrollTop(),left:n.left-(parseInt(this.helper.css("left"),10)||0)+this.scrollParent.scrollLeft()}}return{top:0,left:0}},_cacheMargins:function(){this.margins={left:parseInt(this.element.css("marginLeft"),10)||0,top:parseInt(this.element.css("marginTop"),10)||0,right:parseInt(this.element.css("marginRight"),10)||0,bottom:parseInt(this.element.css("marginBottom"),10)||0}},_cacheHelperProportions:function(){this.helperProportions={width:this.helper.outerWidth(),height:this.helper.outerHeight()}},_setContainment:function(){var i=this.options,r,t,f,u;if(i.containment=="parent"&&(i.containment=this.helper[0].parentNode),(i.containment=="document"||i.containment=="window")&&(this.containment=[i.containment=="document"?0:n(window).scrollLeft()-this.offset.relative.left-this.offset.parent.left,i.containment=="document"?0:n(window).scrollTop()-this.offset.relative.top-this.offset.parent.top,(i.containment=="document"?0:n(window).scrollLeft())+n(i.containment=="document"?document:window).width()-this.helperProportions.width-this.margins.left,(i.containment=="document"?0:n(window).scrollTop())+(n(i.containment=="document"?document:window).height()||document.body.parentNode.scrollHeight)-this.helperProportions.height-this.margins.top]),/^(document|window|parent)$/.test(i.containment)||i.containment.constructor==Array)i.containment.constructor==Array&&(this.containment=i.containment);else{if(r=n(i.containment),t=r[0],!t)return;f=r.offset();u=n(t).css("overflow")!="hidden";this.containment=[(parseInt(n(t).css("borderLeftWidth"),10)||0)+(parseInt(n(t).css("paddingLeft"),10)||0),(parseInt(n(t).css("borderTopWidth"),10)||0)+(parseInt(n(t).css("paddingTop"),10)||0),(u?Math.max(t.scrollWidth,t.offsetWidth):t.offsetWidth)-(parseInt(n(t).css("borderLeftWidth"),10)||0)-(parseInt(n(t).css("paddingRight"),10)||0)-this.helperProportions.width-this.margins.left-this.margins.right,(u?Math.max(t.scrollHeight,t.offsetHeight):t.offsetHeight)-(parseInt(n(t).css("borderTopWidth"),10)||0)-(parseInt(n(t).css("paddingBottom"),10)||0)-this.helperProportions.height-this.margins.top-this.margins.bottom];this.relative_container=r}},_convertPositionTo:function(t,i){i||(i=this.position);var r=t=="absolute"?1:-1,e=this.options,u=this.cssPosition=="absolute"&&!(this.scrollParent[0]!=document&&n.contains(this.scrollParent[0],this.offsetParent[0]))?this.offsetParent:this.scrollParent,f=/(html|body)/i.test(u[0].tagName);return{top:i.top+this.offset.relative.top*r+this.offset.parent.top*r-(this.cssPosition=="fixed"?-this.scrollParent.scrollTop():f?0:u.scrollTop())*r,left:i.left+this.offset.relative.left*r+this.offset.parent.left*r-(this.cssPosition=="fixed"?-this.scrollParent.scrollLeft():f?0:u.scrollLeft())*r}},_generatePosition:function(t){var r=this.options,h=this.cssPosition=="absolute"&&!(this.scrollParent[0]!=document&&n.contains(this.scrollParent[0],this.offsetParent[0]))?this.offsetParent:this.scrollParent,c=/(html|body)/i.test(h[0].tagName),e=t.pageX,o=t.pageY,i,s,u,f;return this.originalPosition&&(this.containment&&(this.relative_container?(s=this.relative_container.offset(),i=[this.containment[0]+s.left,this.containment[1]+s.top,this.containment[2]+s.left,this.containment[3]+s.top]):i=this.containment,t.pageX-this.offset.click.left<i[0]&&(e=i[0]+this.offset.click.left),t.pageY-this.offset.click.top<i[1]&&(o=i[1]+this.offset.click.top),t.pageX-this.offset.click.left>i[2]&&(e=i[2]+this.offset.click.left),t.pageY-this.offset.click.top>i[3]&&(o=i[3]+this.offset.click.top)),r.grid&&(u=r.grid[1]?this.originalPageY+Math.round((o-this.originalPageY)/r.grid[1])*r.grid[1]:this.originalPageY,o=i?(u-this.offset.click.top<i[1]||u-this.offset.click.top>i[3])?(u-this.offset.click.top<i[1])?u+r.grid[1]:u-r.grid[1]:u:u,f=r.grid[0]?this.originalPageX+Math.round((e-this.originalPageX)/r.grid[0])*r.grid[0]:this.originalPageX,e=i?(f-this.offset.click.left<i[0]||f-this.offset.click.left>i[2])?(f-this.offset.click.left<i[0])?f+r.grid[0]:f-r.grid[0]:f:f)),{top:o-this.offset.click.top-this.offset.relative.top-this.offset.parent.top+(this.cssPosition=="fixed"?-this.scrollParent.scrollTop():c?0:h.scrollTop()),left:e-this.offset.click.left-this.offset.relative.left-this.offset.parent.left+(this.cssPosition=="fixed"?-this.scrollParent.scrollLeft():c?0:h.scrollLeft())}},_clear:function(){this.helper.removeClass("ui-draggable-dragging");this.helper[0]==this.element[0]||this.cancelHelperRemoval||this.helper.remove();this.helper=null;this.cancelHelperRemoval=!1},_trigger:function(t,i,r){return r=r||this._uiHash(),n.ui.plugin.call(this,t,[i,r]),t=="drag"&&(this.positionAbs=this._convertPositionTo("absolute")),n.Widget.prototype._trigger.call(this,t,i,r)},plugins:{},_uiHash:function(){return{helper:this.helper,position:this.position,originalPosition:this.originalPosition,offset:this.positionAbs}}});n.ui.plugin.add("draggable","connectToSortable",{start:function(t,i){var r=n(this).data("draggable"),u=r.options,f=n.extend({},i,{item:r.element});r.sortables=[];n(u.connectToSortable).each(function(){var i=n.data(this,"sortable");i&&!i.options.disabled&&(r.sortables.push({instance:i,shouldRevert:i.options.revert}),i.refreshPositions(),i._trigger("activate",t,f))})},stop:function(t,i){var r=n(this).data("draggable"),u=n.extend({},i,{item:r.element});n.each(r.sortables,function(){this.instance.isOver?(this.instance.isOver=0,r.cancelHelperRemoval=!0,this.instance.cancelHelperRemoval=!1,this.shouldRevert&&(this.instance.options.revert=!0),this.instance._mouseStop(t),this.instance.options.helper=this.instance.options._helper,r.options.helper=="original"&&this.instance.currentItem.css({top:"auto",left:"auto"})):(this.instance.cancelHelperRemoval=!1,this.instance._trigger("deactivate",t,u))})},drag:function(t,i){var r=n(this).data("draggable"),u=this,f=function(t){var i=this.offset.click.top,r=this.offset.click.left,u=this.positionAbs.top,f=this.positionAbs.left,e=t.height,o=t.width,s=t.top,h=t.left;return n.ui.isOver(u+i,f+r,s,h,e,o)};n.each(r.sortables,function(){var f=!1,e=this;this.instance.positionAbs=r.positionAbs;this.instance.helperProportions=r.helperProportions;this.instance.offset.click=r.offset.click;this.instance._intersectsWith(this.instance.containerCache)&&(f=!0,n.each(r.sortables,function(){return this.instance.positionAbs=r.positionAbs,this.instance.helperProportions=r.helperProportions,this.instance.offset.click=r.offset.click,this!=e&&this.instance._intersectsWith(this.instance.containerCache)&&n.ui.contains(e.instance.element[0],this.instance.element[0])&&(f=!1),f}));f?(this.instance.isOver||(this.instance.isOver=1,this.instance.currentItem=n(u).clone().removeAttr("id").appendTo(this.instance.element).data("sortable-item",!0),this.instance.options._helper=this.instance.options.helper,this.instance.options.helper=function(){return i.helper[0]},t.target=this.instance.currentItem[0],this.instance._mouseCapture(t,!0),this.instance._mouseStart(t,!0,!0),this.instance.offset.click.top=r.offset.click.top,this.instance.offset.click.left=r.offset.click.left,this.instance.offset.parent.left-=r.offset.parent.left-this.instance.offset.parent.left,this.instance.offset.parent.top-=r.offset.parent.top-this.instance.offset.parent.top,r._trigger("toSortable",t),r.dropped=this.instance.element,r.currentItem=r.element,this.instance.fromOutside=r),this.instance.currentItem&&this.instance._mouseDrag(t)):this.instance.isOver&&(this.instance.isOver=0,this.instance.cancelHelperRemoval=!0,this.instance.options.revert=!1,this.instance._trigger("out",t,this.instance._uiHash(this.instance)),this.instance._mouseStop(t,!0),this.instance.options.helper=this.instance.options._helper,this.instance.currentItem.remove(),this.instance.placeholder&&this.instance.placeholder.remove(),r._trigger("fromSortable",t),r.dropped=!1)})}});n.ui.plugin.add("draggable","cursor",{start:function(){var t=n("body"),i=n(this).data("draggable").options;t.css("cursor")&&(i._cursor=t.css("cursor"));t.css("cursor",i.cursor)},stop:function(){var t=n(this).data("draggable").options;t._cursor&&n("body").css("cursor",t._cursor)}});n.ui.plugin.add("draggable","opacity",{start:function(t,i){var r=n(i.helper),u=n(this).data("draggable").options;r.css("opacity")&&(u._opacity=r.css("opacity"));r.css("opacity",u.opacity)},stop:function(t,i){var r=n(this).data("draggable").options;r._opacity&&n(i.helper).css("opacity",r._opacity)}});n.ui.plugin.add("draggable","scroll",{start:function(){var t=n(this).data("draggable");t.scrollParent[0]!=document&&t.scrollParent[0].tagName!="HTML"&&(t.overflowOffset=t.scrollParent.offset())},drag:function(t){var r=n(this).data("draggable"),i=r.options,u=!1;r.scrollParent[0]!=document&&r.scrollParent[0].tagName!="HTML"?(i.axis&&i.axis=="x"||(r.overflowOffset.top+r.scrollParent[0].offsetHeight-t.pageY<i.scrollSensitivity?r.scrollParent[0].scrollTop=u=r.scrollParent[0].scrollTop+i.scrollSpeed:t.pageY-r.overflowOffset.top<i.scrollSensitivity&&(r.scrollParent[0].scrollTop=u=r.scrollParent[0].scrollTop-i.scrollSpeed)),i.axis&&i.axis=="y"||(r.overflowOffset.left+r.scrollParent[0].offsetWidth-t.pageX<i.scrollSensitivity?r.scrollParent[0].scrollLeft=u=r.scrollParent[0].scrollLeft+i.scrollSpeed:t.pageX-r.overflowOffset.left<i.scrollSensitivity&&(r.scrollParent[0].scrollLeft=u=r.scrollParent[0].scrollLeft-i.scrollSpeed))):(i.axis&&i.axis=="x"||(t.pageY-n(document).scrollTop()<i.scrollSensitivity?u=n(document).scrollTop(n(document).scrollTop()-i.scrollSpeed):n(window).height()-(t.pageY-n(document).scrollTop())<i.scrollSensitivity&&(u=n(document).scrollTop(n(document).scrollTop()+i.scrollSpeed))),i.axis&&i.axis=="y"||(t.pageX-n(document).scrollLeft()<i.scrollSensitivity?u=n(document).scrollLeft(n(document).scrollLeft()-i.scrollSpeed):n(window).width()-(t.pageX-n(document).scrollLeft())<i.scrollSensitivity&&(u=n(document).scrollLeft(n(document).scrollLeft()+i.scrollSpeed))));u!==!1&&n.ui.ddmanager&&!i.dropBehaviour&&n.ui.ddmanager.prepareOffsets(r,t)}});n.ui.plugin.add("draggable","snap",{start:function(){var t=n(this).data("draggable"),i=t.options;t.snapElements=[];n(i.snap.constructor!=String?i.snap.items||":data(draggable)":i.snap).each(function(){var i=n(this),r=i.offset();this!=t.element[0]&&t.snapElements.push({item:this,width:i.outerWidth(),height:i.outerHeight(),top:r.top,left:r.left})})},drag:function(t,i){for(var d,r=n(this).data("draggable"),k=r.options,u=k.snapTolerance,c=i.offset.left,a=c+r.helperProportions.width,l=i.offset.top,v=l+r.helperProportions.height,f=r.snapElements.length-1;f>=0;f--){var e=r.snapElements[f].left,s=e+r.snapElements[f].width,o=r.snapElements[f].top,h=o+r.snapElements[f].height;if(!(e-u<c&&c<s+u&&o-u<l&&l<h+u||e-u<c&&c<s+u&&o-u<v&&v<h+u||e-u<a&&a<s+u&&o-u<l&&l<h+u||e-u<a&&a<s+u&&o-u<v&&v<h+u)){r.snapElements[f].snapping&&r.options.snap.release&&r.options.snap.release.call(r.element,t,n.extend(r._uiHash(),{snapItem:r.snapElements[f].item}));r.snapElements[f].snapping=!1;continue}if(k.snapMode!="inner"){var y=Math.abs(o-v)<=u,p=Math.abs(h-l)<=u,w=Math.abs(e-a)<=u,b=Math.abs(s-c)<=u;y&&(i.position.top=r._convertPositionTo("relative",{top:o-r.helperProportions.height,left:0}).top-r.margins.top);p&&(i.position.top=r._convertPositionTo("relative",{top:h,left:0}).top-r.margins.top);w&&(i.position.left=r._convertPositionTo("relative",{top:0,left:e-r.helperProportions.width}).left-r.margins.left);b&&(i.position.left=r._convertPositionTo("relative",{top:0,left:s}).left-r.margins.left)}if(d=y||p||w||b,k.snapMode!="outer"){var y=Math.abs(o-l)<=u,p=Math.abs(h-v)<=u,w=Math.abs(e-c)<=u,b=Math.abs(s-a)<=u;y&&(i.position.top=r._convertPositionTo("relative",{top:o,left:0}).top-r.margins.top);p&&(i.position.top=r._convertPositionTo("relative",{top:h-r.helperProportions.height,left:0}).top-r.margins.top);w&&(i.position.left=r._convertPositionTo("relative",{top:0,left:e}).left-r.margins.left);b&&(i.position.left=r._convertPositionTo("relative",{top:0,left:s-r.helperProportions.width}).left-r.margins.left)}!r.snapElements[f].snapping&&(y||p||w||b||d)&&r.options.snap.snap&&r.options.snap.snap.call(r.element,t,n.extend(r._uiHash(),{snapItem:r.snapElements[f].item}));r.snapElements[f].snapping=y||p||w||b||d}}});n.ui.plugin.add("draggable","stack",{start:function(){var r=n(this).data("draggable").options,t=n.makeArray(n(r.stack)).sort(function(t,i){return(parseInt(n(t).css("zIndex"),10)||0)-(parseInt(n(i).css("zIndex"),10)||0)}),i;t.length&&(i=parseInt(t[0].style.zIndex)||0,n(t).each(function(n){this.style.zIndex=i+n}),this[0].style.zIndex=i+t.length)}});n.ui.plugin.add("draggable","zIndex",{start:function(t,i){var r=n(i.helper),u=n(this).data("draggable").options;r.css("zIndex")&&(u._zIndex=r.css("zIndex"));r.css("zIndex",u.zIndex)},stop:function(t,i){var r=n(this).data("draggable").options;r._zIndex&&n(i.helper).css("zIndex",r._zIndex)}})}(jQuery),function(n){n.widget("ui.resizable",n.ui.mouse,{version:"1.9.2",widgetEventPrefix:"resize",options:{alsoResize:!1,animate:!1,animateDuration:"slow",animateEasing:"swing",aspectRatio:!1,autoHide:!1,containment:!1,ghost:!1,grid:!1,handles:"e,s,se",helper:!1,maxHeight:null,maxWidth:null,minHeight:10,minWidth:10,zIndex:1e3},_create:function(){var i=this,t=this.options,f,r;if(this.element.addClass("ui-resizable"),n.extend(this,{_aspectRatio:!!t.aspectRatio,aspectRatio:t.aspectRatio,originalElement:this.element,_proportionallyResizeElements:[],_helper:t.helper||t.ghost||t.animate?t.helper||"ui-resizable-helper":null}),this.element[0].nodeName.match(/canvas|textarea|input|select|button|img/i)&&(this.element.wrap(n('<div class="ui-wrapper" style="overflow: hidden;"><\/div>').css({position:this.element.css("position"),width:this.element.outerWidth(),height:this.element.outerHeight(),top:this.element.css("top"),left:this.element.css("left")})),this.element=this.element.parent().data("resizable",this.element.data("resizable")),this.elementIsWrapper=!0,this.element.css({marginLeft:this.originalElement.css("marginLeft"),marginTop:this.originalElement.css("marginTop"),marginRight:this.originalElement.css("marginRight"),marginBottom:this.originalElement.css("marginBottom")}),this.originalElement.css({marginLeft:0,marginTop:0,marginRight:0,marginBottom:0}),this.originalResizeStyle=this.originalElement.css("resize"),this.originalElement.css("resize","none"),this._proportionallyResizeElements.push(this.originalElement.css({position:"static",zoom:1,display:"block"})),this.originalElement.css({margin:this.originalElement.css("margin")}),this._proportionallyResize()),this.handles=t.handles||(n(".ui-resizable-handle",this.element).length?{n:".ui-resizable-n",e:".ui-resizable-e",s:".ui-resizable-s",w:".ui-resizable-w",se:".ui-resizable-se",sw:".ui-resizable-sw",ne:".ui-resizable-ne",nw:".ui-resizable-nw"}:"e,s,se"),this.handles.constructor==String)for(this.handles=="all"&&(this.handles="n,e,s,w,se,sw,ne,nw"),f=this.handles.split(","),this.handles={},r=0;r<f.length;r++){var u=n.trim(f[r]),o="ui-resizable-"+u,e=n('<div class="ui-resizable-handle '+o+'"><\/div>');e.css({zIndex:t.zIndex});"se"==u&&e.addClass("ui-icon ui-icon-gripsmall-diagonal-se");this.handles[u]=".ui-resizable-"+u;this.element.append(e)}this._renderAxis=function(t){var i,r,u,f;t=t||this.element;for(i in this.handles)this.handles[i].constructor==String&&(this.handles[i]=n(this.handles[i],this.element).show()),this.elementIsWrapper&&this.originalElement[0].nodeName.match(/textarea|input|select|button/i)&&(r=n(this.handles[i],this.element),u=0,u=/sw|ne|nw|se|n|s/.test(i)?r.outerHeight():r.outerWidth(),f=["padding",/ne|nw|n/.test(i)?"Top":/se|sw|s/.test(i)?"Bottom":/^e$/.test(i)?"Right":"Left"].join(""),t.css(f,u),this._proportionallyResize()),!n(this.handles[i]).length};this._renderAxis(this.element);this._handles=n(".ui-resizable-handle",this.element).disableSelection();this._handles.mouseover(function(){if(!i.resizing){if(this.className)var n=this.className.match(/ui-resizable-(se|sw|ne|nw|n|e|s|w)/i);i.axis=n&&n[1]?n[1]:"se"}});t.autoHide&&(this._handles.hide(),n(this.element).addClass("ui-resizable-autohide").mouseenter(function(){t.disabled||(n(this).removeClass("ui-resizable-autohide"),i._handles.show())}).mouseleave(function(){t.disabled||i.resizing||(n(this).addClass("ui-resizable-autohide"),i._handles.hide())}));this._mouseInit()},_destroy:function(){var i,t;return this._mouseDestroy(),i=function(t){n(t).removeClass("ui-resizable ui-resizable-disabled ui-resizable-resizing").removeData("resizable").removeData("ui-resizable").unbind(".resizable").find(".ui-resizable-handle").remove()},this.elementIsWrapper&&(i(this.element),t=this.element,this.originalElement.css({position:t.css("position"),width:t.outerWidth(),height:t.outerHeight(),top:t.css("top"),left:t.css("left")}).insertAfter(t),t.remove()),this.originalElement.css("resize",this.originalResizeStyle),i(this.originalElement),this},_mouseCapture:function(t){var i=!1;for(var r in this.handles)n(this.handles[r])[0]==t.target&&(i=!0);return!this.options.disabled&&i},_mouseStart:function(t){var u=this.options,s=this.element.position(),r=this.element,f,e,o;return this.resizing=!0,this.documentScroll={top:n(document).scrollTop(),left:n(document).scrollLeft()},(r.is(".ui-draggable")||/absolute/.test(r.css("position")))&&r.css({position:"absolute",top:s.top,left:s.left}),this._renderProxy(),f=i(this.helper.css("left")),e=i(this.helper.css("top")),u.containment&&(f+=n(u.containment).scrollLeft()||0,e+=n(u.containment).scrollTop()||0),this.offset=this.helper.offset(),this.position={left:f,top:e},this.size=this._helper?{width:r.outerWidth(),height:r.outerHeight()}:{width:r.width(),height:r.height()},this.originalSize=this._helper?{width:r.outerWidth(),height:r.outerHeight()}:{width:r.width(),height:r.height()},this.originalPosition={left:f,top:e},this.sizeDiff={width:r.outerWidth()-r.width(),height:r.outerHeight()-r.height()},this.originalMousePosition={left:t.pageX,top:t.pageY},this.aspectRatio=typeof u.aspectRatio=="number"?u.aspectRatio:this.originalSize.width/this.originalSize.height||1,o=n(".ui-resizable-"+this.axis).css("cursor"),n("body").css("cursor",o=="auto"?this.axis+"-resize":o),r.addClass("ui-resizable-resizing"),this._propagate("start",t),!0},_mouseDrag:function(n){var u=this.helper,s=this.options,h=this,i=this.originalMousePosition,f=this.axis,e=n.pageX-i.left||0,o=n.pageY-i.top||0,r=this._change[f],t;return r?(t=r.apply(this,[n,e,o]),this._updateVirtualBoundaries(n.shiftKey),(this._aspectRatio||n.shiftKey)&&(t=this._updateRatio(t,n)),t=this._respectSize(t,n),this._propagate("resize",n),u.css({top:this.position.top+"px",left:this.position.left+"px",width:this.size.width+"px",height:this.size.height+"px"}),!this._helper&&this._proportionallyResizeElements.length&&this._proportionallyResize(),this._updateCache(t),this._trigger("resize",n,this.ui()),!1):!1},_mouseStop:function(t){var r,i;if(this.resizing=!1,r=this.options,i=this,this._helper){var u=this._proportionallyResizeElements,f=u.length&&/textarea/i.test(u[0].nodeName),e=f&&n.ui.hasScroll(u[0],"left")?0:i.sizeDiff.height,o=f?0:i.sizeDiff.width,s={width:i.helper.width()-o,height:i.helper.height()-e},h=parseInt(i.element.css("left"),10)+(i.position.left-i.originalPosition.left)||null,c=parseInt(i.element.css("top"),10)+(i.position.top-i.originalPosition.top)||null;r.animate||this.element.css(n.extend(s,{top:c,left:h}));i.helper.height(i.size.height);i.helper.width(i.size.width);this._helper&&!r.animate&&this._proportionallyResize()}return n("body").css("cursor","auto"),this.element.removeClass("ui-resizable-resizing"),this._propagate("stop",t),this._helper&&this.helper.remove(),!1},_updateVirtualBoundaries:function(n){var r=this.options,u,f,e,o,i;i={minWidth:t(r.minWidth)?r.minWidth:0,maxWidth:t(r.maxWidth)?r.maxWidth:Infinity,minHeight:t(r.minHeight)?r.minHeight:0,maxHeight:t(r.maxHeight)?r.maxHeight:Infinity};(this._aspectRatio||n)&&(u=i.minHeight*this.aspectRatio,e=i.minWidth/this.aspectRatio,f=i.maxHeight*this.aspectRatio,o=i.maxWidth/this.aspectRatio,u>i.minWidth&&(i.minWidth=u),e>i.minHeight&&(i.minHeight=e),f<i.maxWidth&&(i.maxWidth=f),o<i.maxHeight&&(i.maxHeight=o));this._vBoundaries=i},_updateCache:function(n){var i=this.options;this.offset=this.helper.offset();t(n.left)&&(this.position.left=n.left);t(n.top)&&(this.position.top=n.top);t(n.height)&&(this.size.height=n.height);t(n.width)&&(this.size.width=n.width)},_updateRatio:function(n){var f=this.options,i=this.position,r=this.size,u=this.axis;return t(n.height)?n.width=n.height*this.aspectRatio:t(n.width)&&(n.height=n.width/this.aspectRatio),u=="sw"&&(n.left=i.left+(r.width-n.width),n.top=null),u=="nw"&&(n.top=i.top+(r.height-n.height),n.left=i.left+(r.width-n.width)),n},_respectSize:function(n,i){var y=this.helper,r=this._vBoundaries,p=this._aspectRatio||i.shiftKey,f=this.axis,e=t(n.width)&&r.maxWidth&&r.maxWidth<n.width,o=t(n.height)&&r.maxHeight&&r.maxHeight<n.height,s=t(n.width)&&r.minWidth&&r.minWidth>n.width,h=t(n.height)&&r.minHeight&&r.minHeight>n.height,u;s&&(n.width=r.minWidth);h&&(n.height=r.minHeight);e&&(n.width=r.maxWidth);o&&(n.height=r.maxHeight);var c=this.originalPosition.left+this.originalSize.width,l=this.position.top+this.size.height,a=/sw|nw|w/.test(f),v=/nw|ne|n/.test(f);return s&&a&&(n.left=c-r.minWidth),e&&a&&(n.left=c-r.maxWidth),h&&v&&(n.top=l-r.minHeight),o&&v&&(n.top=l-r.maxHeight),u=!n.width&&!n.height,u&&!n.left&&n.top?n.top=null:u&&!n.top&&n.left&&(n.left=null),n},_proportionallyResize:function(){var e=this.options,r,i,t,u,f;if(this._proportionallyResizeElements.length)for(r=this.helper||this.element,i=0;i<this._proportionallyResizeElements.length;i++)t=this._proportionallyResizeElements[i],this.borderDif||(u=[t.css("borderTopWidth"),t.css("borderRightWidth"),t.css("borderBottomWidth"),t.css("borderLeftWidth")],f=[t.css("paddingTop"),t.css("paddingRight"),t.css("paddingBottom"),t.css("paddingLeft")],this.borderDif=n.map(u,function(n,t){var i=parseInt(n,10)||0,r=parseInt(f[t],10)||0;return i+r})),t.css({height:r.height()-this.borderDif[0]-this.borderDif[2]||0,width:r.width()-this.borderDif[1]-this.borderDif[3]||0})},_renderProxy:function(){var r=this.element,u=this.options,t,i;this.elementOffset=r.offset();this._helper?(this.helper=this.helper||n('<div style="overflow:hidden;"><\/div>'),t=n.ui.ie6?1:0,i=n.ui.ie6?2:-1,this.helper.addClass(this._helper).css({width:this.element.outerWidth()+i,height:this.element.outerHeight()+i,position:"absolute",left:this.elementOffset.left-t+"px",top:this.elementOffset.top-t+"px",zIndex:++u.zIndex}),this.helper.appendTo("body").disableSelection()):this.helper=this.element},_change:{e:function(n,t){return{width:this.originalSize.width+t}},w:function(n,t){var u=this.options,i=this.originalSize,r=this.originalPosition;return{left:r.left+t,width:i.width-t}},n:function(n,t,i){var f=this.options,r=this.originalSize,u=this.originalPosition;return{top:u.top+i,height:r.height-i}},s:function(n,t,i){return{height:this.originalSize.height+i}},se:function(t,i,r){return n.extend(this._change.s.apply(this,arguments),this._change.e.apply(this,[t,i,r]))},sw:function(t,i,r){return n.extend(this._change.s.apply(this,arguments),this._change.w.apply(this,[t,i,r]))},ne:function(t,i,r){return n.extend(this._change.n.apply(this,arguments),this._change.e.apply(this,[t,i,r]))},nw:function(t,i,r){return n.extend(this._change.n.apply(this,arguments),this._change.w.apply(this,[t,i,r]))}},_propagate:function(t,i){n.ui.plugin.call(this,t,[i,this.ui()]);t!="resize"&&this._trigger(t,i,this.ui())},plugins:{},ui:function(){return{originalElement:this.originalElement,element:this.element,helper:this.helper,position:this.position,size:this.size,originalSize:this.originalSize,originalPosition:this.originalPosition}}});n.ui.plugin.add("resizable","alsoResize",{start:function(){var r=n(this).data("resizable"),t=r.options,i=function(t){n(t).each(function(){var t=n(this);t.data("resizable-alsoresize",{width:parseInt(t.width(),10),height:parseInt(t.height(),10),left:parseInt(t.css("left"),10),top:parseInt(t.css("top"),10)})})};typeof t.alsoResize!="object"||t.alsoResize.parentNode?i(t.alsoResize):t.alsoResize.length?(t.alsoResize=t.alsoResize[0],i(t.alsoResize)):n.each(t.alsoResize,function(n){i(n)})},resize:function(t,i){var r=n(this).data("resizable"),u=r.options,f=r.originalSize,e=r.originalPosition,s={height:r.size.height-f.height||0,width:r.size.width-f.width||0,top:r.position.top-e.top||0,left:r.position.left-e.left||0},o=function(t,r){n(t).each(function(){var t=n(this),f=n(this).data("resizable-alsoresize"),u={},e=r&&r.length?r:t.parents(i.originalElement[0]).length?["width","height"]:["width","height","top","left"];n.each(e,function(n,t){var i=(f[t]||0)+(s[t]||0);i&&i>=0&&(u[t]=i||null)});t.css(u)})};typeof u.alsoResize!="object"||u.alsoResize.nodeType?o(u.alsoResize):n.each(u.alsoResize,function(n,t){o(n,t)})},stop:function(){n(this).removeData("resizable-alsoresize")}});n.ui.plugin.add("resizable","animate",{stop:function(t){var i=n(this).data("resizable"),u=i.options,r=i._proportionallyResizeElements,f=r.length&&/textarea/i.test(r[0].nodeName),s=f&&n.ui.hasScroll(r[0],"left")?0:i.sizeDiff.height,h=f?0:i.sizeDiff.width,c={width:i.size.width-h,height:i.size.height-s},e=parseInt(i.element.css("left"),10)+(i.position.left-i.originalPosition.left)||null,o=parseInt(i.element.css("top"),10)+(i.position.top-i.originalPosition.top)||null;i.element.animate(n.extend(c,o&&e?{top:o,left:e}:{}),{duration:u.animateDuration,easing:u.animateEasing,step:function(){var u={width:parseInt(i.element.css("width"),10),height:parseInt(i.element.css("height"),10),top:parseInt(i.element.css("top"),10),left:parseInt(i.element.css("left"),10)};r&&r.length&&n(r[0]).css({width:u.width,height:u.height});i._updateCache(u);i._propagate("resize",t)}})}});n.ui.plugin.add("resizable","containment",{start:function(){var t=n(this).data("resizable"),s=t.options,h=t.element,u=s.containment,r=u instanceof n?u.get(0):/parent/.test(u)?h.parent().get(0):u,f,e;if(r)if(t.containerElement=n(r),/document/.test(u)||u==document)t.containerOffset={left:0,top:0},t.containerPosition={left:0,top:0},t.parentData={element:n(document),left:0,top:0,width:n(document).width(),height:n(document).height()||document.body.parentNode.scrollHeight};else{f=n(r);e=[];n(["Top","Right","Left","Bottom"]).each(function(n,t){e[n]=i(f.css("padding"+t))});t.containerOffset=f.offset();t.containerPosition=f.position();t.containerSize={height:f.innerHeight()-e[3],width:f.innerWidth()-e[1]};var o=t.containerOffset,c=t.containerSize.height,l=t.containerSize.width,a=n.ui.hasScroll(r,"left")?r.scrollWidth:l,v=n.ui.hasScroll(r)?r.scrollHeight:c;t.parentData={element:r,left:o.left,top:o.top,width:a,height:v}}},resize:function(t){var i=n(this).data("resizable"),c=i.options,v=i.containerSize,r=i.containerOffset,y=i.size,o=i.position,f=i._aspectRatio||t.shiftKey,u={top:0,left:0},s=i.containerElement;s[0]!=document&&/static/.test(s.css("position"))&&(u=r);o.left<(i._helper?r.left:0)&&(i.size.width=i.size.width+(i._helper?i.position.left-r.left:i.position.left-u.left),f&&(i.size.height=i.size.width/i.aspectRatio),i.position.left=c.helper?r.left:0);o.top<(i._helper?r.top:0)&&(i.size.height=i.size.height+(i._helper?i.position.top-r.top:i.position.top),f&&(i.size.width=i.size.height*i.aspectRatio),i.position.top=i._helper?r.top:0);i.offset.left=i.parentData.left+i.position.left;i.offset.top=i.parentData.top+i.position.top;var e=Math.abs((i._helper?i.offset.left-u.left:i.offset.left-u.left)+i.sizeDiff.width),h=Math.abs((i._helper?i.offset.top-u.top:i.offset.top-r.top)+i.sizeDiff.height),l=i.containerElement.get(0)==i.element.parent().get(0),a=/relative|absolute/.test(i.containerElement.css("position"));l&&a&&(e-=i.parentData.left);e+i.size.width>=i.parentData.width&&(i.size.width=i.parentData.width-e,f&&(i.size.height=i.size.width/i.aspectRatio));h+i.size.height>=i.parentData.height&&(i.size.height=i.parentData.height-h,f&&(i.size.width=i.size.height*i.aspectRatio))},stop:function(){var t=n(this).data("resizable"),r=t.options,c=t.position,u=t.containerOffset,f=t.containerPosition,e=t.containerElement,i=n(t.helper),o=i.offset(),s=i.outerWidth()-t.sizeDiff.width,h=i.outerHeight()-t.sizeDiff.height;t._helper&&!r.animate&&/relative/.test(e.css("position"))&&n(this).css({left:o.left-f.left-u.left,width:s,height:h});t._helper&&!r.animate&&/static/.test(e.css("position"))&&n(this).css({left:o.left-f.left-u.left,width:s,height:h})}});n.ui.plugin.add("resizable","ghost",{start:function(){var t=n(this).data("resizable"),i=t.options,r=t.size;t.ghost=t.originalElement.clone();t.ghost.css({opacity:.25,display:"block",position:"relative",height:r.height,width:r.width,margin:0,left:0,top:0}).addClass("ui-resizable-ghost").addClass(typeof i.ghost=="string"?i.ghost:"");t.ghost.appendTo(t.helper)},resize:function(){var t=n(this).data("resizable"),i=t.options;t.ghost&&t.ghost.css({position:"relative",height:t.size.height,width:t.size.width})},stop:function(){var t=n(this).data("resizable"),i=t.options;t.ghost&&t.helper&&t.helper.get(0).removeChild(t.ghost.get(0))}});n.ui.plugin.add("resizable","grid",{resize:function(t){var i=n(this).data("resizable"),r=i.options,h=i.size,u=i.originalSize,o=i.originalPosition,s=i.axis,c=r._aspectRatio||t.shiftKey,f,e;r.grid=typeof r.grid=="number"?[r.grid,r.grid]:r.grid;f=Math.round((h.width-u.width)/(r.grid[0]||1))*(r.grid[0]||1);e=Math.round((h.height-u.height)/(r.grid[1]||1))*(r.grid[1]||1);/^(se|s|e)$/.test(s)?(i.size.width=u.width+f,i.size.height=u.height+e):/^(ne)$/.test(s)?(i.size.width=u.width+f,i.size.height=u.height+e,i.position.top=o.top-e):/^(sw)$/.test(s)?(i.size.width=u.width+f,i.size.height=u.height+e,i.position.left=o.left-f):(i.size.width=u.width+f,i.size.height=u.height+e,i.position.top=o.top-e,i.position.left=o.left-f)}});var i=function(n){return parseInt(n,10)||0},t=function(n){return!isNaN(parseInt(n,10))}}(jQuery),function(n){function i(n,t){if(!(n.originalEvent.touches.length>1)){n.preventDefault();var i=n.originalEvent.changedTouches[0],r=document.createEvent("MouseEvents");r.initMouseEvent(t,!0,!0,window,1,i.screenX,i.screenY,i.clientX,i.clientY,!1,!1,!1,!1,0,null);n.target.dispatchEvent(r)}}if(n.support.touch="ontouchend"in document,n.support.touch){var t=n.ui.mouse.prototype,u=t._mouseInit,f=t._mouseDestroy,r;t._touchStart=function(n){var t=this;if(n.originalEvent.target.localName=="textarea"||n.originalEvent.target.localName=="input")return!0;!r&&t._mouseCapture(n.originalEvent.changedTouches[0])&&(r=!0,t._touchMoved=!1,i(n,"mouseover"),i(n,"mousemove"),i(n,"mousedown"))};t._touchMove=function(n){r&&(this._touchMoved=!0,i(n,"mousemove"))};t._touchEnd=function(n){r&&(i(n,"mouseup"),i(n,"mouseout"),this._touchMoved||i(n,"click"),r=!1)};t._mouseInit=function(){var t=this;t.element.bind({touchstart:n.proxy(t,"_touchStart"),touchmove:n.proxy(t,"_touchMove"),touchend:n.proxy(t,"_touchEnd")});u.call(t)};t._mouseDestroy=function(){var t=this;t.element.unbind({touchstart:n.proxy(t,"_touchStart"),touchmove:n.proxy(t,"_touchMove"),touchend:n.proxy(t,"_touchEnd")});f.call(t)}}}(jQuery);Object.keys||(Object.keys=function(){"use strict";var t=Object.prototype.hasOwnProperty,i=!{toString:null}.propertyIsEnumerable("toString"),n=["toString","toLocaleString","valueOf","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","constructor"],r=n.length;return function(u){if(typeof u!="object"&&(typeof u!="function"||u===null))throw new TypeError("Object.keys called on non-object");var e=[],o,f;for(o in u)t.call(u,o)&&e.push(o);if(i)for(f=0;f<r;f++)t.call(u,n[f])&&e.push(n[f]);return e}}());Array.prototype.indexOf||(Array.prototype.indexOf=function(n,t){var r,f,u,i;if(this==null)throw new TypeError('"this" is null or not defined');if((f=Object(this),u=f.length>>>0,u===0)||(i=+t||0,Math.abs(i)===Infinity&&(i=0),i>=u))return-1;for(r=Math.max(i>=0?i:u-Math.abs(i),0);r<u;){if(r in f&&f[r]===n)return r;r++}return-1});Array.prototype.filter||(Array.prototype.filter=function(n){"use strict";var i,f,r,e,t,u;if(this===void 0||this===null)throw new TypeError;if(i=Object(this),f=i.length>>>0,typeof n!="function")throw new TypeError;for(r=[],e=arguments.length>=2?arguments[1]:void 0,t=0;t<f;t++)t in i&&(u=i[t],n.call(e,u,t,i)&&r.push(u));return r});String.prototype.format||(String.prototype.format=function(){var n=arguments;return this.replace(/\{(\d+)}/g,function(t,i){return typeof n[i]!="undefined"?n[i]:t})});String.prototype.trimStart||(String.prototype.trimStart=function(){return this.replace(/^\s+/,"")});String.prototype.trimEnd||(String.prototype.trimEnd=function(){return this.replace(/\s+$/,"")});String.prototype.isEmptyOrWhitespace||(String.prototype.isEmptyOrWhitespace=function(){return/^\s*$/.test(this)});String.prototype.beginsWith||(String.prototype.beginsWith=function(n){return this.slice(0,n.length)===n});String.prototype.endsWith||(String.prototype.endsWith=function(n){return this.slice(-n.length)===n});String.prototype.parseXml||(String.prototype.parseXml=function(){if(typeof DOMParser!="undefined")return function(){return(new window.DOMParser).parseFromString(this,"text/xml")};if(typeof ActiveXObject!="undefined"&&new window.ActiveXObject("Microsoft.XMLDOM"))return function(){var n=new window.ActiveXObject("Microsoft.XMLDOM");return n.async="false",n.loadXML(this),n};throw new Error("No XML parser found");}());String.prototype.trim||(String.prototype.trim=function(){return this.replace(/^\s+|\s+$/g,"")}),function(){"use strict";function bt(n){return typeof n=="function"||typeof n=="object"&&n!==null}function b(n){return typeof n=="function"}function kt(n){return typeof n=="object"&&n!==null}function dt(n){k=n}function gt(n){u=n}function ii(){return function(){process.nextTick(h)}}function ri(){return function(){rt(h)}}function ui(){var n=0,i=new et(h),t=document.createTextNode("");return i.observe(t,{characterData:!0}),function(){t.data=n=++n%2}}function fi(){var n=new MessageChannel;return n.port1.onmessage=h,function(){n.port2.postMessage(0)}}function ot(){return function(){setTimeout(h,1)}}function h(){for(var t,i,n=0;n<s;n+=2)t=f[n],i=f[n+1],t(i),f[n]=undefined,f[n+1]=undefined;s=0}function ei(){try{var t=require,n=t("vertx");return rt=n.runOnLoop||n.runOnContext,ri()}catch(i){return ot()}}function c(){}function oi(){return new TypeError("You cannot resolve a promise with itself")}function si(){return new TypeError("A promises callback cannot return that same promise.")}function hi(n){try{return n.then}catch(t){return v.error=t,v}}function ci(n,t,i,r){try{n.call(t,i,r)}catch(u){return u}}function li(t,r,f){u(function(t){var u=!1,e=ci(f,r,function(n){u||(u=!0,r!==n?a(t,n):i(t,n))},function(i){u||(u=!0,n(t,i))},"Settle: "+(t._label||" unknown promise"));!u&&e&&(u=!0,n(t,e))},t)}function ai(t,r){r._state===l?i(t,r._result):r._state===o?n(t,r._result):y(r,undefined,function(n){a(t,n)},function(i){n(t,i)})}function vi(t,r){if(r.constructor===t.constructor)ai(t,r);else{var u=hi(r);u===v?n(t,v.error):u===undefined?i(t,r):b(u)?li(t,r,u):i(t,r)}}function a(t,r){t===r?n(t,oi()):bt(r)?vi(t,r):i(t,r)}function yi(n){n._onerror&&n._onerror(n._result);d(n)}function i(n,t){n._state===e&&(n._result=t,n._state=l,n._subscribers.length!==0&&u(d,n))}function n(n,t){n._state===e&&(n._state=o,n._result=t,u(yi,n))}function y(n,t,i,r){var f=n._subscribers,e=f.length;n._onerror=null;f[e]=t;f[e+l]=i;f[e+o]=r;e===0&&n._state&&u(d,n)}function d(n){var i=n._subscribers,e=n._state,r,u,f,t;if(i.length!==0){for(f=n._result,t=0;t<i.length;t+=3)r=i[t],u=i[t+e],r?ct(e,r,u,f):u(f);n._subscribers.length=0}}function ht(){this.error=null}function pi(n,t){try{return n(t)}catch(i){return p.error=i,p}}function ct(t,r,u,f){var c=b(u),s,v,h,y;if(c){if(s=pi(u,f),s===p?(y=!0,v=s.error,s=null):h=!0,r===s){n(r,si());return}}else s=f,h=!0;r._state!==e||(c&&h?a(r,s):y?n(r,v):t===l?i(r,s):t===o&&n(r,s))}function wi(t,i){try{i(function(n){a(t,n)},function(i){n(t,i)})}catch(r){n(t,r)}}function r(t,r){var u=this;u._instanceConstructor=t;u.promise=new t(c);u._validateInput(r)?(u._input=r,u.length=r.length,u._remaining=r.length,u._init(),u.length===0?i(u.promise,u._result):(u.length=u.length||0,u._enumerate(),u._remaining===0&&i(u.promise,u._result))):n(u.promise,u._validationError())}function bi(n){return new lt(this,n).promise}function ki(t){function o(n){a(i,n)}function s(t){n(i,t)}var u=this,i=new u(c),f,r;if(!it(t))return n(i,new TypeError("You must pass an array to race.")),i;for(f=t.length,r=0;i._state===e&&r<f;r++)y(u.resolve(t[r]),undefined,o,s);return i}function di(n){var i=this,t;return n&&typeof n=="object"&&n.constructor===i?n:(t=new i(c),a(t,n),t)}function gi(t){var r=this,i=new r(c);return n(i,t),i}function nr(){throw new TypeError("You must pass a resolver function as the first argument to the promise constructor");}function tr(){throw new TypeError("Failed to construct 'Promise': Please use the 'new' operator, this object constructor cannot be called as a function.");}function t(n){this._id=wt++;this._state=undefined;this._result=undefined;this._subscribers=[];c!==n&&(b(n)||nr(),this instanceof t||tr(),wi(this,n))}function ir(){var n,t;if(typeof global!="undefined")n=global;else if(typeof self!="undefined")n=self;else try{n=Function("return this")()}catch(i){throw new Error("polyfill failed because global object is unavailable in this environment");}(t=n.Promise,typeof Promise=="undefined"||Promise.toString().indexOf("[native code]")===-1)&&(n.Promise=g)}var tt,f,st,p,lt,at,vt,yt,pt,wt,g,nt,w;tt=Array.isArray?Array.isArray:function(n){return Object.prototype.toString.call(n)==="[object Array]"};var it=tt,s=0,rr={}.toString,rt,k,u=function(n,t){f[s]=n;f[s+1]=t;s+=2;s===2&&(k?k(h):st())};var ut=typeof window!="undefined"?window:undefined,ft=ut||{},et=ft.MutationObserver||ft.WebKitMutationObserver,ni=typeof process!="undefined"&&{}.toString.call(process)==="[object process]",ti=typeof Uint8ClampedArray!="undefined"&&typeof importScripts!="undefined"&&typeof MessageChannel!="undefined";f=new Array(1e3);st=ni?ii():et?ui():ti?fi():ut===undefined&&typeof require=="function"?ei():ot();var e=void 0,l=1,o=2,v=new ht;p=new ht;r.prototype._validateInput=function(n){return it(n)};r.prototype._validationError=function(){return new Error("Array Methods must be provided an Array")};r.prototype._init=function(){this._result=new Array(this.length)};lt=r;r.prototype._enumerate=function(){for(var n=this,i=n.length,r=n.promise,u=n._input,t=0;r._state===e&&t<i;t++)n._eachEntry(u[t],t)};r.prototype._eachEntry=function(n,t){var i=this,r=i._instanceConstructor;kt(n)?n.constructor===r&&n._state!==e?(n._onerror=null,i._settledAt(n._state,t,n._result)):i._willSettleAt(r.resolve(n),t):(i._remaining--,i._result[t]=n)};r.prototype._settledAt=function(t,r,u){var f=this,s=f.promise;s._state===e&&(f._remaining--,t===o?n(s,u):f._result[r]=u);f._remaining===0&&i(s,f._result)};r.prototype._willSettleAt=function(n,t){var i=this;y(n,undefined,function(n){i._settledAt(l,t,n)},function(n){i._settledAt(o,t,n)})};at=bi;vt=ki;yt=di;pt=gi;wt=0;g=t;t.all=at;t.race=vt;t.resolve=yt;t.reject=pt;t._setScheduler=dt;t._setAsap=gt;t._asap=u;t.prototype={constructor:t,then:function(n,t){var f=this,i=f._state,r,e,s;return i===l&&!n||i===o&&!t?this:(r=new this.constructor(c),e=f._result,i?(s=arguments[i-1],u(function(){ct(i,r,s,e)})):y(f,r,n,t),r)},"catch":function(n){return this.then(null,n)}};nt=ir;w={Promise:g,polyfill:nt};typeof define=="function"&&define.amd?define("ES6Promise",function(){return w}):typeof module!="undefined"&&module.exports?module.exports=w:typeof this!="undefined"&&(this.ES6Promise=w);nt()}.call(this),function(n){"use strict";function v(n,t){for(var r,e=[],f=[n],o={},i,u;f.length!=0;)for(i=f.pop(),o[i]=!0,u=0;typeof t[i]!="undefined"&&u<t[i].deps.length;++u)r=t[i].deps[u],e.push([i,r]),o[r]||f.push(r);return e}function y(n){return p(w(n),n)}function p(n,t){function e(i,o,s){var l,h,a,c;if(s.indexOf(i)>=0){l=[].concat(s,i).join(" -> ");throw new Error("Found a dependency cycle: "+l);}if(!u[o]){if(u[o]=!0,h=t.filter(function(n){return n[0]===i}),o=h.length){a=s.concat(i);do c=h[--o][1],e(c,n.indexOf(c),a);while(o)}f[--r]=i}}for(var r=n.length,f=new Array(r),u={},i=r;i--;)u[i]||e(n[i],i,[]);return f}function w(n){for(var i,t=[],r=0,u=n.length;r<u;r++)i=n[r],t.indexOf(i[0])<0&&t.push(i[0]),t.indexOf(i[1])<0&&t.push(i[1]);return t}var t={},i={},e=function(n,i,r){if(arguments.length!==3)throw new Error("Only the three-argument version of define() is supported.");var u=typeof r=="function"?r:function(){return r};t[n]={name:n,deps:i||[],factory:u}},r=function(n){if(typeof t[n]!="undefined")return t[n];throw new Error('"'+n+'" has not been defined');},u=function(n,t){var e,i,f;if(typeof t[n.name]=="undefined"){for(e=[],i=0;i<n.deps.length;++i)u(r(n.deps[i]),t),e.push(t[n.deps[i]]);if(f=n.factory.apply(this,e),typeof f=="undefined"||f===null)throw new Error('Function provided when defining "'+n.name+'" must return a non-null/non-undefined value');t[n.name]=f}},o=function(n){var o,e,f,s;if(typeof t[n]=="undefined")throw new Error('"'+n+'" has not been defined');for(o=v(n,t),e=y(o),f=e.length-1;f>=0;--f)s=e[f],u(r(s),i);return u(r(n),i),i[n]},s=function(n,t){var i,r;if(arguments.length<=0||arguments.length>2)throw new Error("Only two require syntaxes are supported: (1) require(<name>), and (2) require([<dep1>, <dep2>, ...], callbackFunction)");else{if(arguments.length===1){if(typeof n!="string")throw new Error('The single-argument version of require expects a string as its parameter, but its type was "'+typeof n+'"');return o(n)}if(Array.isArray(n)){if(typeof t!="function")throw new Error('The two-argument version of require expects a function as its second parameter, but its type was "'+typeof t+'"');}else throw new Error('The two-argument version of require expects an array as its first parameter, but its type was "'+typeof n+'"');}for(r=[],i=0;i<n.length;++i)r.push(o(n[i]));t.apply(this,r)},h=function(){return{knownDeps:t,resolvedDeps:i}},l=function(n){t=n.knownDeps;i=n.resolvedDeps},c=function(){var n=h();return t={},i={},e("require",[],function(){return s}),n},a=function(n,t,i,r,u){return n.amd=!0,{define:n,require:t,_getState:i,_setState:r,_reset:u}},f=a(e,s,h,l,c);c();typeof define=="function"&&define.amd||(n.nitrequire=f,n.define=f.define,n.require=f.require)}(typeof window!="undefined"?window:typeof global!="undefined"?global:this);define("NIT.Agent.Types",[],function(){"use strict";function n(n,t,i,r,u,f,e){function h(n){var i,r,u,t;if(s.hasOwnProperty(n))for(i=[],arguments.length>1&&(i=Array.prototype.slice.call(arguments,1)),r=s[n].slice(),u=r.length,t=0;t<u;t++)try{r[t].apply(null,i)}catch(f){e.error("NIT.AGENT: Failure Processing '{0}' event handler - {1}".format(n,f))}}function p(n,t){return function(i){st(i,n,t)}}function c(n){return function(t,i,r){vt(t,i,r);n({xhr:t,statusText:i,error:r})}}function b(n){if(n.length!==1)throw new Error("sendInput: expected 1 argument, received "+n.length);var t=n[0];if(t===null||typeof t=="undefined")throw new Error("sendInput: input argument must be defined and non-null");if(typeof t=="string"&&t==="")throw new Error("sendInput: string argument must not be the empty string");if(typeof t!="string"&&(typeof t.question=="undefined"||t.question===""))throw new Error("sendInput: object argument must contain a question property that is not the empty string");}function k(t){var r={},u;return t.length===1&&typeof t[0]=="string"?r.question=t[0]:t.length===1&&typeof t[0]=="object"&&(r=t[0]),r.userID=r.userID||i.getAgentUserId(),r.sessionID=r.sessionID||i.getAgentSessionId(),r.origin=r.origin||"Typed",r.channel=r.channel||a,r.language=r.language||y,r.accessKey=r.accessKey||l,u=new n.ConverseRequestObject,v(u,r,u),u}function d(n){if(n.length>1)throw new Error("getConversationHistory: optionally expected 1 argument, received "+n.length);if(n.length===1&&(typeof n[0]!="object"||n[0]===null))throw new TypeError("getConversationHistory: if specified, argument is required to be an object");}function g(t){var r=new n.GetHistoryRequestObject(i.getAgentUserId(),i.getAgentSessionId());return t.length===1&&v(r,t[0],r),r}function nt(n){if(n.length<1||n.length>2)throw new Error("sendAppEvent: expected 1 or 2 arguments, received "+n.length);if(n.length>=1)if(typeof n[0]!="object"&&typeof n[0]!="string"||n[0]===null||n[0]==="")throw new Error("sendAppEvent: name must be a non-empty string or object");else if(typeof n[0]=="object"&&(typeof n[0].eventName!="string"||n[0].eventName===""))throw new Error("sendAppEvent: detail must contain an non-empty string eventName property");if(n.length===2&&(typeof n[1]!="object"||n[1]===null))throw new TypeError("sendAppEvent: params must be of type object.");}function tt(t){var r={},u;return t.length===1&&typeof t[0]=="string"?r.eventName=t[0]:t.length===1&&typeof t[0]=="object"?r=t[0]:(r.eventName=t[0],r.parameters=t[1]),r.userID=r.userID||i.getAgentUserId(),r.sessionID=r.sessionID||i.getAgentSessionId(),r.origin=r.origin||"Internal",r.channel=r.channel||a,r.language=r.language||y,r.accessKey=r.accessKey||l,u=new n.ApplicationEventRequestObject,v(u,r,u),u}function it(n){if(n.length<1||n.length>2)throw new Error("getUnit: expected 1 or 2 arguments, received "+n.length);if(n.length===1){if(typeof n[0]!="object"||n[0]===null)throw new TypeError("getUnit: 1-arg version requires argument to be an object");if(!n[0].unitId)throw new Error("getUnit: 1-arg version must contain unitId property");if(!n[0].displayText)throw new Error("getUnit: 1-arg version must contain displayText property");}else{if(typeof n[0]!="string"||n[0]===null||n[0]==="")throw new TypeError("getUnit: 2-arg version requires first argument to be a string.");if(typeof n[1]!="string"||n[1]===null||n[1]==="")throw new TypeError("getUnit: 2-arg version requires second argument to be a string.");}}function rt(t){var r,u;return r=t.length===1?t[0]:{unitId:t[0],displayText:t[1]},r.userID=r.userID||i.getAgentUserId(),r.sessionID=r.sessionID||i.getAgentSessionId(),r.origin=r.origin||"Click",r.channel=r.channel||a,r.language=r.language||y,r.accessKey=r.accessKey||l,u=new n.UnitRequestObject,v(u,r,u),u}function ut(n){if(n.length<1||n.length>2)throw new Error("sendReportingEvent: expected 1 or 2 arguments, received "+n.length);if(n.length===1){if(typeof n[0]!="object"||n[0]===null)throw new TypeError("sendReportingEvent: 1-arg version requires argument to be an object");if(!n[0].variableName)throw new Error("sendReportingEvent: 1-arg version must contain variableName property");if(!n[0].variableValue)throw new Error("sendReportingEvent: 1-arg version must contain variableValue property");}else{if(typeof n[0]!="string"||n[0]===null||n[0]==="")throw new TypeError("sendReportingEvent: 2-arg version requires first argument to be a non-empty string.");if(typeof n[1]!="string"||n[1]===null||n[1]==="")throw new TypeError("sendReportingEvent: 2-arg version requires second argument to be a non-empty string.");}}function ft(t){var r,u;return t.length===1?(r=t[0],r.userID=r.userID||i.getAgentUserId(),r.sessionID=r.sessionID||i.getAgentSessionId()):r={userID:i.getAgentUserId(),sessionID:i.getAgentSessionId(),variableName:t[0],variableValue:t[1]},r.channel=r.channel||a,r.accessKey=r.accessKey||l,u=new n.ReportingEventObject,v(u,r,u),u}function et(n){if(n.length!==1)throw new Error("revertConversation: expected 1 argument, received "+n.length);var t=w(n[0]);if(!t){if(typeof n[0]!="object"||n[0]===null)throw new TypeError("revertConversation: 1-arg version requires argument to be an object or a positive integer");if(!w(n[0].messageRevision))throw new Error("revertConversation: advanced 1-arg version must contain positive integer value property");}}function ot(t){var u,r;return u=w(t[0])?{userID:i.getAgentUserId(),sessionID:i.getAgentSessionId(),revision:t[0]}:{userID:t[0].userID||i.getAgentUserId(),sessionID:t[0].sessionID||i.getAgentSessionId(),revision:t[0].messageRevision},r=new n.HistoryRollbackRequestObject,v(r,u,r),r}function w(n){return f.isInt(n)&&n>0}function v(n,t,i){var r,u=[];for(r in t)t.hasOwnProperty(r)&&(n.hasOwnProperty(r)||u.push(r));if(u.length>0)throw new Error("Unknown properties: "+u.join());for(r in n)n.hasOwnProperty(r)&&typeof t[r]!="undefined"&&(i[r]=t[r])}function st(n,t,i){typeof n!="undefined"&&n!==null&&(ct(n),lt(n),pt(n,t,i),yt(n),ht(n),at(n,t))}function ht(n){h(o.supportedEvents.ResponseReceived,n)}function ct(n){n.userId&&f.isNonEmptyGuid(n.userId)&&i.setAgentUserId(n.userId)}function lt(n){n.sessionId&&i.setAgentSessionId(n.sessionId)}function at(n,t){t&&!n.deferredAppCall&&t(n)}function vt(n,t,i){h(o.supportedEvents.ErrorReceived,n,t,i)}function yt(n){var t,i;if(n.responseActions&&n.responseActions.length)for(t=0;t<n.responseActions.length;t++)try{i=n.responseActions[t];r.execute(i,n)}catch(u){e.error("NIT.AGENT: Failure Processing '{0}' "+"response action handler - {1}".format(name,u.toString()))}}function pt(r,f,o){var h,v,s,w;if(r.deferredAppCall){h=r.deferredAppCall.AppcallName;v=r.deferredAppCall.StructuredResponse;try{w=u.execute(h,v,r);s=new n.ApplicationEventRequestObject(i.getAgentUserId(),i.getAgentSessionId(),"_sysResume","Deferred AppCall",w)}catch(b){e.error("NIT.AGENT: Failure Processing '{0}' "+"deferred appcall handler - {1}".format(h,b.toString()));s=new n.ApplicationEventRequestObject(i.getAgentUserId(),i.getAgentSessionId(),"_sysResume","Deferred AppCall")}s.accessKey=l;s.channel=a;s.language=y;t.sendAppEvent(s,p(f),c(o))}}var o=this,s={},l=n.defaultAccessKey,y=n.defaultLanguageCode,a=n.defaultChannel;this.supportedEvents={ResponseReceived:"onAgentResponse",ErrorReceived:"onAgentError",HistoryLoaded:"onAgentHistoryLoaded",ConversationReverted:"onAgentConversationReverted",SessionEventReported:"onAgentReportingEvent",BeforeInputSent:"onBeforeInputSent",BeforeAppEventSent:"onBeforeAppEventSent",BeforeUnitRequestSent:"onBeforeUnitRequestSent"};this.addEventListener=function(n,t){s.hasOwnProperty(n)?s[n].push(t):s[n]=[t]};this.removeEventListener=function(n,t){if(s.hasOwnProperty(n)){var i=s[n].indexOf(t);i!==-1&&s[n].splice(i,1)}};this.sendInput=function(){b(arguments);var n=k(arguments);return new Promise(function(i,r){h(o.supportedEvents.BeforeInputSent,n);t.sendConverseRequest(n,p(i,r),c(r))})};this.getConversationHistory=function(){d(arguments);var n=g(arguments);return new Promise(function(i,r){t.sendGetHistoryRequest(n,function(n){h(o.supportedEvents.HistoryLoaded,n);i(n)},c(r))})};this.sendAppEvent=function(){nt(arguments);var n=tt(arguments);return new Promise(function(i,r){h(o.supportedEvents.BeforeAppEventSent,n);t.sendAppEvent(n,p(i,r),c(r))})};this.getUnit=function(){it(arguments);var n=rt(arguments);return new Promise(function(i,r){h(o.supportedEvents.BeforeUnitRequestSent,n);t.sendUnitRequest(n,p(i,r),c(r))})};this.sendReportingEvent=function(){ut(arguments);var n=ft(arguments);return new Promise(function(i,r){t.sendReportingEvent(n,function(){h(o.supportedEvents.SessionEventReported);i()},c(r))})};this.revertConversation=function(){et(arguments);var n=ot(arguments);return new Promise(function(i,r){t.sendHistoryRollbackRequest(n,function(){h(o.supportedEvents.ConversationReverted);i()},c(r))})};this.setChannel=function(t){a=t||n.defaultChannel};this.setAccessKey=function(t){l=t||n.defaultAccessKey};this.setLanguageCode=function(t){y=t||n.defaultLanguageCode}}return{Agent:n}});define("NIT.Agent",["NIT.Agent.Types","NIT.Converse.Types","NIT.Converse","NIT.Session","NIT.ResponseActionProvider","NIT.DeferredAppcallProvider","NIT.Utils","NIT.Logger"],function(n,t,i,r,u,f,e,o){"use strict";return new n.Agent(t,i,r,u,f,e,o)});define("NIT.Communicator.Types",[],function(){function n(n,t){function r(n,r,f,e,o){u();var s={url:n,method:r,withCredentials:!0,crossOrigin:!0,timeout:i,success:function(n){e&&e(n)},error:function(n,t,i){o&&o(n,t,i)}};f!==null&&(s.contentType="application/json",s.type="json",s.data=JSON.stringify(f));t(s)}function u(){var t=n.ClientTimeout;i===t||isNaN(t)||(t=parseInt(t),t>=1&&(i=t))}var i=1e4;this.postJSON=function(n,t,i,u){r(n,"POST",t,i,u);return};this.getJSON=function(n,t,i,u){r(n,"GET",t,i,u);return};this.headerCheck=function(n,t,i){r(n,"HEAD",null,t,i)}}return{Communicator:n}});define("NIT.Communicator",["NIT.Communicator.Types","NIT.Settings","reqwest"],function(n,t,i){return new n.Communicator(t,i)});define("NIT.Configurations.Types",[],function(){function n(n){this.channel=n||"Web"}function t(n,t){this.getConfigurationSettings=function(i,r,u){var f=n.BaseUrl+"api/Configuration/GetConfiguration";t.postJSON(f,i,r,u)}}return{ConfigurationRequest:n,Configurations:t}});define("NIT.Configurations",["NIT.Configurations.Types","NIT.Communicator","NIT.Settings"],function(n,t,i){return new n.Configurations(i,t)});define("NIT.Converse.Types",[],function(){"use strict";function u(i,r,u,f,e,o){this.userID=i;this.sessionID=r;this.variableName=u;this.variableValue=f;this.channel=e||t;this.accessKey=o||n}function f(r,u,f,e,o,s,h,c,l){this.userID=r;this.sessionID=u;this.question=f;this.displayText=e;this.origin=o;this.parameters=s||{};this.channel=h||t;this.language=c||i;this.accessKey=l||n}function e(r,u,f,e,o,s,h,c,l){this.userID=r;this.sessionID=u;this.unitId=f;this.displayText=e;this.origin=o;this.parameters=s||{};this.channel=h||t;this.language=c||i;this.accessKey=l||n}function o(n,t,i){this.userID=n;this.sessionID=t;this.revision=i}function r(r,u,f,e,o,s,h,c){this.userID=r;this.sessionID=u;this.eventName=f;this.origin=e;this.parameters=o||{};this.channel=s||t;this.language=h||i;this.accessKey=c||n}function s(n,t,i,r){this.userID=n;this.sessionID=t;this.messageLimit=i||0;this.includeRevertedEntries=r||!1}function h(n,t,i,u,f,e){function h(n,i,r,u){typeof n.parameters!="undefined"&&(n.parameters.ClientTime=t.getCurrentClientTime());s(n,i,r,u)}function s(t,i,r,f){var e=u.BaseUrl+i;n.postJSON(e,t,r,f)}var o=u.ConversationApiUrl||"/api/Conversation",c=u.ConversationSupportApiUrl||"/api/ConversationSupport";return{sendHistoryRollbackRequest:function(n,t,i){var r=o+"/RollBackHistory";s(n,r,t,i)},sendReportingEvent:function(n,t,i){this.sendReportingEvents([n],t,i)},sendReportingEvents:function(n,t,i){for(var u=o+"/ReportingEvent",r=0;r<n.length;r++)s(n[r],u,t,i)},sendAppEvent:function(n,t,i){var r=o+"/appEvent";h(n,r,t,i)},sendUnitRequest:function(n,t,i){var r=o+"/RequestUnit";h(n,r,t,i)},sendConverseRequest:function(n,t,i){var r=o+"/converse";h(n,r,t,i)},sendGetHistoryRequest:function(n,t,i){var r=c+"/GetHistory";s(n,r,t,i)},handleDeferredAppCall:function(n,t,i,u,f){var s=!1,h,c,o,l;if(n.deferredAppCall){s=!0;h=n.deferredAppCall.AppcallName;c=n.deferredAppCall.StructuredResponse;try{l=e.execute(h,c,n);o=new r(t,i,"_sysResume","Deferred AppCall",l);this.sendAppEvent(o,u,f)}catch(a){o=new r(t,i,"_sysResume","Deferred AppCall");this.sendAppEvent(o,u,f)}}return s},handleResponseActions:function(n){var i=!1,t,r;if(n.responseActions&&n.responseActions.length)for(i=!0,t=0;t<n.responseActions.length;t++)r=n.responseActions[t],f.execute(r,n);return i}}}var n="00000000-0000-0000-0000-000000000000",t="Web",i="en-US";return{ReportingEventObject:u,ConverseRequestObject:f,UnitRequestObject:e,HistoryRollbackRequestObject:o,ApplicationEventRequestObject:r,GetHistoryRequestObject:s,Converse:h,defaultAccessKey:n,defaultChannel:t,defaultLanguageCode:i}});define("NIT.Converse",["NIT.Converse.Types","NIT.Communicator","NIT.Utils","NIT.Logger","NIT.Settings","NIT.ResponseActionProvider","NIT.DeferredAppcallProvider"],function(n,t,i,r,u,f,e){return new n.Converse(t,i,r,u,f,e)});define("NIT.DeferredAppcallProvider.Types",[],function(){function n(n){var t={};this.registerHandler=function(i,r){if(typeof r!="function")throw Error(r+" is not a function");return t[i]&&n.warn('Handler for "{0}" deferred appcall is being overwritten'.format(i)),t[i]=r,Object.keys(t).length};this.unregisterHandler=function(i){return t[i]?delete t[i]:n.warn('No handlers registered for "{0}" deferred appcall'.format(i)),Object.keys(t).length};this.execute=function(i,r,u){var f=t[i];if(f)try{return f(r,u)}catch(e){n.warn('Handler for "{0}" deferred appcall threw exception: {1}'.format(i,e))}else n.warn('No handlers registered for "{0}" deferred appcall'.format(i));return null};this.reset=function(){t={}}}return{DeferredAppcallProvider:n}});define("NIT.DeferredAppcallProvider",["NIT.DeferredAppcallProvider.Types","NIT.Logger"],function(n,t){return new n.DeferredAppcallProvider(t)}),function(n){define("NIT.Logger.Types",[],function(){function t(t,i){function u(t){var r=i.UiLogLevel||n.WARN;return t>=r}function r(i){return function(r){u(n[i])&&t.log(i+": "+r)}}this.fatal=r("FATAL");this.error=r("ERROR");this.warn=r("WARN");this.info=r("INFO");this.debug=r("DEBUG")}var n={OFF:99,FATAL:5,ERROR:4,WARN:3,INFO:2,DEBUG:1,ALL:1};return{Logger:t,Levels:n}});define("NIT.Logger",["NIT.Logger.Types","NIT.Console","NIT.Settings"],function(n,t,i){return new n.Logger(t,i)});define("NIT.Console",[],function(){return n.console||{log:function(){}}})}(typeof global!="undefined"?global:typeof window!="undefined"?window:this);define("NIT.ResponseActionProvider.Types",[],function(){function n(n){var t={};this.registerHandler=function(i,r){if(typeof r!="function")throw Error(r+" is not a function");return t[i]&&n.warn('Handler for "{0}" response action is being overwritten'.format(i)),t[i]=r,Object.keys(t).length};this.unregisterHandler=function(i){return t[i]?delete t[i]:n.warn('No handlers registered for "{0}" response action'.format(i)),Object.keys(t).length};this.execute=function(i,r){var u=i.Name,f=t[u];if(f)try{f(i,r)}catch(e){n.warn('Handler for "{0}" response action threw exception: {1}'.format(u,e))}else n.warn('No handlers registered for "{0}" response action'.format(u))};this.reset=function(){t={}}}return{ResponseActionProvider:n}});define("NIT.ResponseActionProvider",["NIT.ResponseActionProvider.Types","NIT.Logger"],function(n,t){return new n.ResponseActionProvider(t)});define("NIT.Session.Types",[],function(){function n(n,t){function o(t){if(!n.isNonEmptyGuid(t))throw new Error("User ID must be a valid GUID");}function s(n){if(typeof n!="string"||n.length>88)throw new Error("Session ID must be a string of 88 characters or less");}var u=this,i,r,f="User",e="Session";this.getAgentUserId=function(){return i&&i.length!==0||(i=t.getData(f,null),i&&i.length!==0||u.setAgentUserId(n.createGuid())),i};this.setAgentUserId=function(n){o(n);i=n;t.storeData(f,i)};this.getAgentSessionId=function(){return r&&r.length!==0||(r=t.getData(e,null),r&&r.length!==0||u.setAgentSessionId(n.createGuid())),r};this.setAgentSessionId=function(n){s(n);r=n;t.storeData(e,r)}}return{SessionService:n}});define("NIT.Session",["NIT.Session.Types","NIT.Utils","NIT.ClientDataStore"],function(n,t,i){return new n.SessionService(t,i)});define("NIT.Settings",["NIT.Logger.Types"],function(n){function t(){for(var n,t="",r=document.getElementsByTagName("script"),i=0;i<r.length;i++)if(n=r[i].getAttribute("src",-1),/\/includes\/nit\.api\.min\.js$/i.test(n)||/\/includes\/CoreAPI\/nit\.settings\.js$/i.test(n)){t=n;break}return t.substr(0,t.toLowerCase().lastIndexOf("/includes/")+1)}return{BaseUrl:t(),ClientTimeout:1e4,ConversationApiUrl:"api/Conversation",ConversationSupportApiUrl:"api/ConversationSupport",UiLogLevel:n.Levels.WARN}});define("NIT.SettingsLoader.Types",[],function(){function n(n,t,i,r){function s(n){for(var t=0;t<n.configurationSettings.length;t++)h(n.configurationSettings[t])}function h(n){var o=n.Key,i=n.Value,e;e=i&&i.beginsWith("<value")?l(i):i&&i.length>0&&!isNaN(i)?i.indexOf(".")>-1?parseFloat(i):u(i):f(i)?!0:a(i)?!1:i;t[o]=e;r.debug("{0}: {1}".format(o,e))}function c(n){try{return n.attributes.getNamedItem("type")}catch(t){}}function l(n){var o=n.parseXml(),i=o.firstChild,t,r,e;if(i){t=i.textContent;typeof t=="undefined"&&(t=i.text);r=i.attributes.type;typeof r=="undefined"&&(e=c(i),typeof e!="undefined"&&e!==null&&(r=e));switch((r?r.value:"").toLowerCase()){case"int":case"integer":case"number":return u(t);case"float":return parseFloat(t);case"json":case"object":return JSON.parse(t);case"bool":case"boolean":return f(t);default:return t}}else return n}function u(n){return parseInt(n,10)}function f(n){return e.test(n)}function a(n){return o.test(n)}function v(n,t,i){i?r.fatal(t+" - "+i.name):r.fatal(t)}var e=/^true$/i,o=/^false$/i;this.loadSettings=function(r,u,f){var e=new n.ConfigurationRequest;e.channel=r||"Web";i.getConfigurationSettings(e,function(n){s(n);typeof u=="function"&&u(t)},function(n,t,i){v(n,t,i);typeof f=="function"&&f(n,t,i)})}}return{SettingsLoader:n}});define("NIT.SettingsLoader",["NIT.SettingsLoader.Types","NIT.Configurations.Types","NIT.Settings","NIT.Configurations","NIT.Logger"],function(n,t,i,r,u){return new n.SettingsLoader(t,i,r,u)});define("NIT.DateTimeProvider",[],function(){return{now:function(){return new Date}}});define("NIT.Utils.Types",[],function(){function n(n){this.escapeJSReservedCharacters=function(n){return String(n).replace(/\\/g,"\\\\").replace(/\'/g,"\\'").replace(/\"/g,'\\"')};this.getCurrentClientTime=function(){var u=n.now(),t=u.getHours(),f=t>12?t-12:t===0?12:t,i=u.getMinutes(),r;return i<10&&(i="0"+i),r=f.toString()+":"+i.toString()+" ",t>11?r+"PM":r+"AM"};this.createGuid=function(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(n){var t=Math.random()*16|0,i=n==="x"?t:t&3|8;return i.toString(16)})};this.isNonEmptyGuid=function(n){if(typeof n=="undefined"||!n)return!1;return/^[0-9a-f]{8}-[0-9a-f]{4}-[1-5][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}$/i.test(n)};this.isInt=function(n){return typeof n=="number"&&n%1==0}}return{Utils:n}});define("NIT.Utils",["NIT.Utils.Types","NIT.DateTimeProvider"],function(n,t){return new n.Utils(t)});define("NIT.CookieUtils.Types",[],function(){"use strict";function n(n){var t=this;this.name=n;this.primaryValue=null;this.properties={};this.domain=null;this.path="/";this.isSecure=!1;this.expiration=null;this.loadValues=function(n){var r=typeof n=="string"?n.split("&"):null,i,u,f,e;if(r&&r.length>0&&n.indexOf("=")>-1)for(i=0;i<r.length;i++)u=r[i].indexOf("="),u>1?(f=r[i].substr(0,u),e=r[i].substr(u+1),t.properties[f]=decodeURIComponent(e)):i===0&&(t.primaryValue=decodeURIComponent(r[i]));else t.primaryValue=decodeURIComponent(n)};this.serialize=function(){var n=encodeURIComponent(t.primaryValue||""),i,r;for(i in t.properties)t.properties.hasOwnProperty(i)&&(r=t.properties[i]||"",n+="&{0}={1}".format(encodeURIComponent(i),encodeURIComponent(r)));return n[0]==="&"&&(n=n.substr(1)),this.name+"="+n+(t.expiration===null?"":";expires="+t.expiration.toUTCString())+";path="+this.path+(t.domain===null?"":";domain="+t.domain)+(t.isSecure?";secure;":";")}}function t(t){function r(n){document.cookie=n.serialize()}var i=this,u=new Date(1970,1,1);this.createNewCookie=function(i){var r=new n(i);return r.domain=t.getBaseDomain(),r};this.getOrCreateCookie=function(n){var t=i.getCookie(n);return t?t:i.createNewCookie(n)};this.getCookie=function(n){return i.getCookies()[n]||null};this.getCookies=function(){var s={},o,u,i,r,f,h,e;if(document.cookie!=="")for(o=document.cookie.split("; "),u=0;u<o.length;u++)i=o[u],r=i.indexOf("="),r>0?f=i.substr(0,r):(r=i.length,f=i),h=i.length>r+1?i.substring(r+1,i.length):"",e=new n(f),e.loadValues(h),e.domain=t.getBaseDomain(),s[f]=e;return s};this.saveCookie=function(n){typeof n!="undefined"&&n!=null&&r(n)};this.deleteCookie=function(n){var t=i.getCookies();t.hasOwnProperty(n)&&(t[n].expiration=u,r(t[n]))};this.getCookiesAsString=function(){var n=i.getCookies(),r="",t,u;for(t in n)if(n.hasOwnProperty(t)){r+="Name: "+n[t].name+"\n";r+="Value: "+n[t].primaryValue+"\n";for(u in n[t].properties)n[t].properties.hasOwnProperty(u)&&(r+="    "+u+": ",r+=n[t].properties[u]+"\n")}return r}}return{CookieService:t,Cookie:n}});define("NIT.CookieUtils",["NIT.CookieUtils.Types","NIT.DomainExtractor"],function(n,t){return new n.CookieService(t)});define("NIT.ClientDataStore.Types",[],function(){"use strict";function n(n,t){function r(n){if(typeof n!="string"||n.length<1)throw Error("Invalid Key Specified");}var i="NIT_SessionState";this.getData=function(u,f){r(u);t.debug('Retrieving item "{0}"'.format(u));var e=n.getCookie(i);return e&&e.properties.hasOwnProperty(u)?e.properties[u]:f};this.storeData=function(u,f){r(u);t.debug('Storing item "{0}": "{1}"'.format(u,f));var e=n.getOrCreateCookie(i);e.properties[u]=f;n.saveCookie(e)};this.removeData=function(u){r(u);t.debug('Removing item "{0}"'.format(u));var f=n.getCookie(i);f&&f.properties.hasOwnProperty(u)&&(delete f.properties[u],n.saveCookie(f))};this.clear=function(){n.deleteCookie(i)}}return{CookieDataStore:n}});define("NIT.ClientDataStore",["NIT.ClientDataStore.Types","NIT.CookieUtils","NIT.Logger"],function(n,t,i){return new n.CookieDataStore(t,i)});define("NIT.DomainExtractor.Types",[],function(){"use strict";function n(){var n=this;this.getCurrentDomain=function(){return document.domain};this.getBaseDomain=function(){var i=n.getCurrentDomain(),t=i.match(/([A-Za-z0-9-]{1,63})+(\.[A-Za-z]{2,3}){1,2}$/i);return t&&t.length>0?t[0]:i}}return{DomainExtractorService:n}});define("NIT.DomainExtractor",["NIT.DomainExtractor.Types"],function(n){return new n.DomainExtractorService});!function(n,t,i){typeof module!="undefined"&&module.exports?module.exports=i():typeof define=="function"&&define.amd?define(n,[],i):t[n]=i()}("reqwest",this,function(){function et(n){return nt.test(window.location.protocol)?tt.test(n.status):!!n.response}function ot(n,t,r){return function(){var u,f;if(n._aborted)return r({},"Request is aborted: timeout",{});if(n.request&&n.request[i]==4)if(n.request.onreadystatechange=ut,et(n.request))t(n.request);else{u=new Error(n.request.response);try{f=JSON.parse(n.request.response);u=new Error(f.StackTrace||"");u.name=f.ExceptionMessage||"An Unexpected Error Occurred"}catch(e){}r(n.request,n.request.statusText,u)}}}function st(n,t){var i=t.headers||{},r,f;i.Accept=i.Accept||u.accept[t.type]||u.accept["*"];f=typeof FormData=="function"&&t.data instanceof FormData;t.crossOrigin||i[p]||(i[p]=u.requestedWith);i[y]||f||(i[y]=t.contentType||u.contentType);for(r in i)i.hasOwnProperty(r)&&"setRequestHeader"in n&&n.setRequestHeader(r,i[r])}function ht(n,t){typeof t.withCredentials!="undefined"&&typeof n.withCredentials!="undefined"&&(n.withCredentials=!!t.withCredentials)}function ct(n){r=n}function b(n,t){return n+(/\?/.test(n)?"&":"?")+t}function lt(u,e,o,s){var y=it++,p=u.jsonpCallback||"callback",c=u.jsonpCallbackName||n.getcallbackPrefix(y),w=new RegExp("((^|\\?|&)"+p+")=([^&]+)"),l=s.match(w),h=a.createElement("script"),v=0,k=navigator.userAgent.indexOf("MSIE 10.0")!==-1;return l?l[3]==="?"?s=s.replace(w,"$1="+c):c=l[3]:s=b(s,p+"="+c),t[c]=ct,h.type="text/javascript",h.src=s,h.async=!0,typeof h.onreadystatechange=="undefined"||k||(h.htmlFor=h.id="_reqwest_"+y),h.onload=h.onreadystatechange=function(){if(h[i]&&h[i]!=="complete"&&h[i]!=="loaded"||v)return!1;h.onload=h.onreadystatechange=null;h.onclick&&h.onclick();e(r);r=undefined;f.removeChild(h);v=1},f.appendChild(h),{abort:function(){h.onload=h.onreadystatechange=null;o({},"Request is aborted: timeout",{});r=undefined;f.removeChild(h);v=1}}}function at(i,r){var u=this.o,c=(u.method||"GET").toUpperCase(),e=typeof u=="string"?u:u.url,s=u.processData!==!1&&u.data&&typeof u.data!="string"?n.toQueryString(u.data):u.data||null,f,a=!1,l;if((u.type=="jsonp"||c=="GET")&&s&&(e=b(e,s),s=null),u.type=="jsonp")return lt(u,i,r,e);f=u.xhr&&u.xhr(u)||ft(u);l=u.async===!1?!1:!0;try{f.open(c,e,l)}catch(h){if(h.number&&h.number===-2147024809&&/^head$/i.test(c))try{f.open("GET",e,l)}catch(v){throw h;}else throw h;}return st(f,u),ht(f,u),t[o]&&f instanceof t[o]?(f.onload=i,f.onerror=r,f.onprogress=function(){},a=!0):f.onreadystatechange=ot(this,i,r),u.before&&u.before(f),a?setTimeout(function(){f.send(s)},200):f.send(s),f}function h(n,t){this.o=n;this.fn=t;k.apply(this,arguments)}function vt(n){return n.match("json")?"json":n.match("javascript")?"js":n.match("text")?"html":n.match("xml")?"xml":void 0}function k(n,i){function u(resp){var type=n.type||vt(resp.getResponseHeader("Content-Type")),filteredResponse,r;resp=type!=="jsonp"?self.request:resp;filteredResponse=w.dataFilter(resp.responseText,type);r=filteredResponse;try{resp.responseText=r}catch(e){}if(r)switch(type){case"json":try{resp=t.JSON?t.JSON.parse(r):eval("("+r+")")}catch(err){return r(resp,"Could not parse JSON in response",err)}break;case"js":resp=eval(r);break;case"html":resp=r;break;case"xml":resp=resp.responseXML&&resp.responseXML.parseError&&resp.responseXML.parseError.errorCode&&resp.responseXML.parseError.reason?null:resp.responseXML}for(self._responseArgs.resp=resp,self._fulfilled=!0,i(resp),self._successHandler(resp);self._fulfillmentHandlers.length>0;)resp=self._fulfillmentHandlers.shift()(resp);complete(resp)}function r(n,t,i){for(n=self.request,self._responseArgs.resp=n,self._responseArgs.msg=t,self._responseArgs.t=i,self._erred=!0;self._errorHandlers.length>0;)self._errorHandlers.shift()(n,t,i);complete(n)}this.url=typeof n=="string"?n:n.url;this.timeout=null;this._fulfilled=!1;this._successHandler=function(){};this._fulfillmentHandlers=[];this._errorHandlers=[];this._completeHandlers=[];this._erred=!1;this._responseArgs={};self=this;i=i||function(){};n.timeout&&(this.timeout=setTimeout(function(){self.abort()},n.timeout));n.success&&(this._successHandler=function(){n.success.apply(n,arguments)});n.error&&this._errorHandlers.push(function(){n.error.apply(n,arguments)});n.complete&&this._completeHandlers.push(function(){n.complete.apply(n,arguments)});complete=function(t){for(n.timeout&&clearTimeout(self.timeout),self.timeout=null;self._completeHandlers.length>0;)self._completeHandlers.shift()(t)};this.request=at.call(this,u,r)}function n(n,t){return new h(n,t)}function c(n){return n?n.replace(/\r?\n/g,"\r\n"):""}function d(n,t){var r=n.name,s=n.tagName.toLowerCase(),e=function(n){n&&!n.disabled&&t(r,c(n.attributes.value&&n.attributes.value.specified?n.value:n.text))},u,o,f,i;if(!n.disabled&&r)switch(s){case"input":/reset|button|image|file/i.test(n.type)||(u=/checkbox/i.test(n.type),o=/radio/i.test(n.type),f=n.value,(u||o)&&!n.checked||t(r,c(u&&f===""?"on":f)));break;case"textarea":t(r,c(n.value));break;case"select":if(n.type.toLowerCase()==="select-one")e(n.selectedIndex>=0?n.options[n.selectedIndex]:null);else for(i=0;n.length&&i<n.length;i++)n.options[i].selected&&e(n.options[i])}}function g(){for(var i=this,n,r=function(n,t){for(var u,f,r=0;r<t.length;r++)for(f=n[v](t[r]),u=0;u<f.length;u++)d(f[u],i)},t=0;t<arguments.length;t++)n=arguments[t],/input|select|textarea/i.test(n.tagName)&&d(n,i),r(n,["input","select","textarea"])}function yt(){return n.toQueryString(n.serializeArray.apply(null,arguments))}function pt(){var n={};return g.apply(function(t,i){t in n?(n[t]&&!s(n[t])&&(n[t]=[n[t]]),n[t].push(i)):n[t]=i},arguments),n}function l(n,t,i,r){var e,u,f;if(s(t))for(u=0;t&&u<t.length;u++)f=t[u],i||/\[\]$/.test(n)?r(n,f):l(n+"["+(typeof f=="object"?u:"")+"]",f,i,r);else if(t&&t.toString()==="[object Object]")for(e in t)l(n+"["+e+"]",t[e],i,r);else r(n,t)}var t=window,a=document,nt=/^http/,tt=/^(20\d|1223)$/,v="getElementsByTagName",i="readyState",y="Content-Type",p="X-Requested-With",f=a[v]("head")[0],it=0,rt="reqwest_"+ +new Date,r,e="XMLHttpRequest",o="XDomainRequest",ut=function(){},s=typeof Array.isArray=="function"?Array.isArray:function(n){return n instanceof Array},u={contentType:"application/x-www-form-urlencoded",requestedWith:e,accept:{"*":"text/javascript, text/html, application/xml, text/xml, */*",xml:"application/xml, text/xml",html:"text/html",text:"text/plain",json:"application/json, text/javascript",js:"application/javascript, text/javascript"}},ft=function(n){if(n.crossOrigin===!0){var i=t[e]?new XMLHttpRequest:null;if(i&&"withCredentials"in i)return i;if(t[o])return new XDomainRequest;throw new Error("Browser does not support cross-origin requests");}else return t[e]?new XMLHttpRequest:new ActiveXObject("Microsoft.XMLHTTP")},w={dataFilter:function(n){return n}};return h.prototype={abort:function(){this._aborted=!0;this.request.abort()},retry:function(){k.call(this,this.o,this.fn)},then:function(n,t){return n=n||function(){},t=t||function(){},this._fulfilled?this._responseArgs.resp=n(this._responseArgs.resp):this._erred?t(this._responseArgs.resp,this._responseArgs.msg,this._responseArgs.t):(this._fulfillmentHandlers.push(n),this._errorHandlers.push(t)),this},always:function(n){return this._fulfilled||this._erred?n(this._responseArgs.resp):this._completeHandlers.push(n),this},fail:function(n){return this._erred?n(this._responseArgs.resp,this._responseArgs.msg,this._responseArgs.t):this._errorHandlers.push(n),this},"catch":function(n){return this.fail(n)}},n.serializeArray=function(){var n=[];return g.apply(function(t,i){n.push({name:t,value:i})},arguments),n},n.serialize=function(){if(arguments.length===0)return"";var t,r,i=Array.prototype.slice.call(arguments,0);return t=i.pop(),t&&t.nodeType&&i.push(t)&&(t=null),t&&(t=t.type),r=t=="map"?pt:t=="array"?n.serializeArray:yt,r.apply(null,i)},n.toQueryString=function(n,t){var r,i,o=t||!1,u=[],f=encodeURIComponent,e=function(n,t){t="function"==typeof t?t():t==null?"":t;u[u.length]=f(n)+"="+f(t)};if(s(n))for(i=0;n&&i<n.length;i++)e(n[i].name,n[i].value);else for(r in n)n.hasOwnProperty(r)&&l(r,n[r],o,e);return u.join("&").replace(/%20/g,"+")},n.getcallbackPrefix=function(){return rt},n.compat=function(n,t){return n&&(n.type&&(n.method=n.type)&&delete n.type,n.dataType&&(n.type=n.dataType),n.jsonpCallback&&(n.jsonpCallbackName=n.jsonpCallback)&&delete n.jsonpCallback,n.jsonp&&(n.jsonpCallback=n.jsonp)),new h(n,t)},n.ajaxSetup=function(n){n=n||{};for(var t in n)w[t]=n[t]},n});var agent=require("NIT.Agent"),settingsLoader=require("NIT.SettingsLoader"),settings=require("NIT.Settings"),dataStore=require("NIT.ClientDataStore"),cookieUtils=require("NIT.CookieUtils"),sessionUtils=require("NIT.Session"),VIRTUAL_CHAT={};VIRTUAL_CHAT.historyLoaded=!1;VIRTUAL_CHAT.requestInProgress=!1;VIRTUAL_CHAT.createCookie=function(n,t,i){var u="",r;i&&(r=new Date,r.setTime(r.getTime()+i*864e5),u="; expires="+r.toUTCString());document.cookie=n+"="+t+u+"; path=/"};VIRTUAL_CHAT.readCookie=function(n){for(var t,r=n+"=",u=document.cookie.split(";"),i=0;i<u.length;i++){for(t=u[i];t.charAt(0)==" ";)t=t.substring(1,t.length);if(t.indexOf(r)==0)return t.substring(r.length,t.length)}return null};VIRTUAL_CHAT.GetPageAwarenessValues=function(){var n=window.location;return{AbsolutePath:n.href,Protocol:n.protocol,Host:n.host,HostName:n.hostname,Port:n.port,Uri:n.pathname,Query:n.search,Fragment:n.hash,Origin:n.origin,Type:"embedded",PageName:n.href}};VIRTUAL_CHAT.EnableDisableRequests=function(n){n?($(".alme--window--footer--inputbox__textarea").prop("disabled",!1),$(".alme--window--footer--inputbox__submit").prop("disabled",!1),$(".alme--window--footer--inputbox__textarea").focus()):($(".alme--window--footer--inputbox__textarea").prop("disabled",!0),$(".alme--window--footer--inputbox__submit").prop("disabled",!0))};VIRTUAL_CHAT.ShowVirtualChat=function(){$(".chat .icon-links").not(".virtualChatAnchor").addClass("hidden");$(".chat-text a").not(".virtualChatAnchor").addClass("hidden");$(".virtualChatAnchor").show()};VIRTUAL_CHAT.Init=function(){var t,n;VIRTUAL_CHAT.ShowVirtualChat();settings.BaseUrl=VIRTUALCHATAPI;agent.addEventListener(agent.supportedEvents.ResponseReceived,VIRTUAL_CHAT.agentResponseHandler);_contactDrawerConfig&&(VIRTUAL_CHAT.ViewingText=_contactDrawerConfig.MicroContent.ViewingText,VIRTUAL_CHAT.ViewText=_contactDrawerConfig.MicroContent.ViewText,VIRTUAL_CHAT.UserLabel=_contactDrawerConfig.MicroContent.UserNameText,VIRTUAL_CHAT.almeAgentName=_contactDrawerConfig.MicroContent.AgentNameText,VIRTUAL_CHAT.agentTypingText=_contactDrawerConfig.MicroContent.AgentTypingText,VIRTUAL_CHAT.agentTypingTimeout=isNaN(_contactDrawerConfig.MicroContent.AgentTypingTimeout)?3e3:parseInt(_contactDrawerConfig.MicroContent.AgentTypingTimeout));VIRTUAL_CHAT.OpenOrCloseChatWindow();_contactDrawerConfig.IsMobile||($(".alme--window").draggable({containment:$("#site-wrapper"),cancel:".alme--window--conversation,.alme--window--footer",stop:function(){VIRTUAL_CHAT.createCookie("AvaChatWindowPosition",encodeURIComponent($(".alme--window.ui-draggable").attr("style")))}}),$(".alme--window").resizable({minHeight:320,minWidth:320,stop:function(){VIRTUAL_CHAT.createCookie("AvaChatWindowPosition",encodeURIComponent($(".alme--window.ui-draggable").attr("style")))}}),$(".alme--window--conversation").bind("touchstart",function(){$(".alme--window").draggable("disable")}),$(".alme--window--conversation").bind("touchend",function(){$(".alme--window").draggable("enable")}));$(".alme--window--header--toolbar--minimize").click(function(){VIRTUAL_CHAT.createCookie("AvaChatWindowStatus","false");$("#nit-alme-window-root").hide()});$(".alme--window--footer__links__about").click(function(){var n={eventName:"SubmitAboutButtonPressed",parameters:{lwp:VIRTUAL_CHAT.readCookie("lwp"),_inUISessionId:VIRTUAL_CHAT.SessionId,Context:{CurrentUrl:VIRTUAL_CHAT.GetPageAwarenessValues()},_inPreviousDisplayLinks:VIRTUAL_CHAT.PreviousDisplayLinks}};agent.sendAppEvent(n)});$(".alme--window--footer__links__print").click(function(){window.print()});$("a.virtualChatAnchor").click(function(n){n.preventDefault();$("#nit-alme-window-root").is(":visible")||(VIRTUAL_CHAT.historyLoaded||VIRTUAL_CHAT.GetHistory(),VIRTUAL_CHAT.createCookie("AvaChatWindowStatus","true"),$("#nit-alme-window-root").show(),PROACTIVE_CHAT.CloseProactiveChatDrawer())});t=$(".virtualChatAnchor").not("a");t.length>0&&(n=$(t[0]).closest("a"),n.addClass("dellmetrics-masthead"),$(n).data("metrics",{btnname:"virtualchatmastheadlaunch",virtualchatlaunch:"true"}),$(n).click(function(n){n.preventDefault();$("#nit-alme-window-root").is(":visible")||(VIRTUAL_CHAT.historyLoaded||VIRTUAL_CHAT.GetHistory(),VIRTUAL_CHAT.createCookie("AvaChatWindowStatus","true"),$("#nit-alme-window-root").show(),PROACTIVE_CHAT.CloseProactiveChatDrawer())}));agent.addEventListener(agent.supportedEvents.ErrorReceived,VIRTUAL_CHAT.agentErrorHandler)};VIRTUAL_CHAT.SetAvaCookie=function(n){var t=cookieUtils.getOrCreateCookie("AvaChatWindowStatus");t.primaryValue=n;cookieUtils.saveCookie(t)};VIRTUAL_CHAT.OpenOrCloseChatWindow=function(){for(var n,t,i=VIRTUAL_CHAT.readCookie("AvaChatWindowStatus"),u=window.location.href.slice(window.location.href.indexOf("?")+1).split("&"),r=0;r<u.length;r++)if(n=u[r].split("="),n.length>1&&n[0]=="avachatnonmobile"&&!_contactDrawerConfig.IsMobile){i=n[1];break}else if(n.length>1&&n[0]=="avachat"){i=n[1];break}t=VIRTUAL_CHAT.readCookie("AvaChatWindowPosition");typeof t!="undefined"&&t!=null&&$(".alme--window").attr("style",decodeURIComponent(t));i==="true"?(VIRTUAL_CHAT.historyLoaded||VIRTUAL_CHAT.GetHistory(),$("#nit-alme-window-root").show(),$(".alme--window--footer--inputbox__textarea").focus(),VIRTUAL_CHAT.createCookie("AvaChatWindowStatus","true")):($("#nit-alme-window-root").hide(),VIRTUAL_CHAT.createCookie("AvaChatWindowStatus","false"))};VIRTUAL_CHAT.SendVirtualChatQuery=function(){var n=$(".alme--window--footer--inputbox__textarea").val(),r=typeof n=="undefined"||n===null||n.match(/^ *$/)!==null,t,i;if(!r&&(t=/<[a-z][\s\S]*>/i.test(n),!t)){if(VIRTUAL_CHAT.requestInProgress)return;VIRTUAL_CHAT.requestInProgress=!0;VIRTUAL_CHAT.EnableDisableRequests(!1);i={question:n,parameters:{lwp:VIRTUAL_CHAT.readCookie("lwp"),_inUISessionId:VIRTUAL_CHAT.SessionId,Context:{CurrentUrl:VIRTUAL_CHAT.GetPageAwarenessValues()},_inPreviousDisplayLinks:VIRTUAL_CHAT.PreviousDisplayLinks}};agent.sendInput(i)}$(".alme--window--footer--inputbox__textarea").val("")};VIRTUAL_CHAT.inputUserTemplate=['<div class="alme--window--conversation--input--user">','<div class="alme--window--conversation--input--user__message">','<div class="alme--window--conversation--input--user__message__displayname">',"userLabel","<\/div>",'<div class="alme--window--conversation--input--user__message__text">',"queryText","<\/div>","<\/div>","<\/div>"];VIRTUAL_CHAT.conversationResponseTemplate=['<div class="alme--window--conversation--response--alme">','<div class="alme--window--conversation--response--alme__personaicon">',"<\/div>",'<div class="alme--window--conversation--response--alme__message">','<div class="alme--window--conversation--response--alme__message__displayname">',"agentDisplayName","<\/div>",'<div class="alme--window--conversation--response--alme__message__text">',"<span>","responseText","<\/span>","<\/div>","<\/div>","<\/div>"];VIRTUAL_CHAT.aboutResponseTemplate=['<div class="alme--window--conversation--response--about">','<div class="alme--window--conversation--response--about__message">','<div class="alme--window--conversation--response--about__personaicon">',"<\/div>",'<div class="alme--window--conversation--response--about__message__text">',"<span>","responseText","<\/span>","<\/div>","<\/div>","<\/div>"];VIRTUAL_CHAT.displayLinksTemplate=['<div class="alme--window--conversation--response--alme__message__displayLinks">','<div class="alme--window--conversation--response--alme__message__displayLinks__section">','<div class="alme--window--conversation--response--alme__message__displayLinks__sectionHeader">',"<\/div>","displayLinksPlaceHolder","<\/div>","<\/div>"];VIRTUAL_CHAT.displayLinkTemplate=['<div class="alme--window--conversation--response--alme__message__displayLinks__link">','<a href="displayLinkAddress" linkid="linkUID" targetType="linkTargetType" target="linkTarget" inputtext="linkInputText">',"displayLinkText","<\/a>","<\/div>"];VIRTUAL_CHAT.navLinkTemplate=['<div class="alme--window--conversation--response--alme__message__navigationlink__autoNav" data-viewing="viewingText">','<a class="alme--window--conversation--response--alme__message__navigationlink" href="navLinkAddress" target="navigationType" data-view="viewText">',"navLinkTitle","<\/a>","<\/div>"];VIRTUAL_CHAT.UpdateChatWindow=function(n,t,i,r,u,f){var s=u!=null&&u.length>0&&u[0].Name==="DisplayAboutAva",e=$(".alme--window--conversation"),h=0,o,l,a,c;n!=null&&(o=VIRTUAL_CHAT.inputUserTemplate.join("\n"),o=o.replace("userLabel",VIRTUAL_CHAT.UserLabel),o=o.replace("queryText",n),e.append(o),VIRTUAL_CHAT.historyLoaded&&(e.append("<div class='avaTyping'>"+VIRTUAL_CHAT.agentTypingText+"<\/div>"),l=e[0].scrollHeight,a=$(".avaTyping").last().outerHeight(),e.scrollTop(l-a),h=VIRTUAL_CHAT.agentTypingTimeout));c=function(){var v,h,o,c,l,k,a,d,p;if($(".avaTyping").remove(),t!=null){if(v=new RegExp("^http://www\\.dell\\.com"),h=VIRTUAL_CHAT.conversationResponseTemplate.join("\n"),s&&(h=VIRTUAL_CHAT.aboutResponseTemplate.join("\n")),h=h.replace("responseText",t),h=n==null?h.replace("agentDisplayName",VIRTUAL_CHAT.almeAgentName):h.replace("agentDisplayName",""),e.append(h),r!=null){var g=VIRTUAL_CHAT.navLinkTemplate.join("\n"),nt=$("<a>").prop("href",r.UrlAddress).prop("hostname"),y=r.UrlAddress;v.test(y)&&(y=r.UrlAddress.replace(nt,window.location.host));o=g.replace("navLinkAddress",y);o=o.replace("viewText",VIRTUAL_CHAT.ViewText);var w=r.LinkNavigationType.toLowerCase(),b=r.AutoNavigationType.toLowerCase(),tt=r.DisplayText,it=u!=null&&u.length>0&&u[0].Name==="DoNotNavigate";it&&(w=u[0].Metadata.LinkNavigationType.toLowerCase(),b=u[0].Metadata.AutoNavigationType.toLowerCase());o=o.replace("navLinkTitle",tt);o=b==="none"?o.replace("viewingText",VIRTUAL_CHAT.ViewText):o.replace("viewingText",VIRTUAL_CHAT.ViewingText);switch(w){case"mainpage":o=o.replace("navigationType","_self");break;case"popup":o=o.replace("navigationType","_blank");break;default:o=o.replace("navigationType","none")}s?$(".alme--window--conversation--response--about__message__text").last().append(o):$(".alme--window--conversation--response--alme__message__text").last().append(o)}VIRTUAL_CHAT.PreviousDisplayLinks=i;c=-1;typeof f!="undefined"&&f!=null&&f.Sections!=null&&f.Sections.length>0&&(c=f.Sections[0].FoldLocation);i!=null&&i.length>0&&(l="",k=VIRTUAL_CHAT.displayLinkTemplate.join("\n"),$.each(i,function(n,t){var r,u,e,f,o;n==c&&(l+='<div class="alme--window--conversation--response--alme__message__displayLinks__fold--colapsed"><span class="viewMore">&gt; View more<\/span>');r=k.replace("displayLinkText",t.DisplayText);u=t.TargetType.toLowerCase();r=r.replace("linkTargetType",u);u==="url"?(e=$("<a>").prop("href",t.Metadata.UrlAddress).prop("hostname"),f=t.Metadata.UrlAddress,v.test(f)&&(f=t.Metadata.UrlAddress.replace(e,window.location.host)),o=t.Metadata.NavigationType.toLowerCase(),r=r.replace("displayLinkAddress",f),r=r.replace("linkUID",""),r=o=="popup"?r.replace("linkTarget","_blank"):r.replace("linkTarget","_self"),r=r.replace("linkInputText","")):u==="unit"?(r=r.replace("linkUID",t.Metadata.UnitUID),r=r.replace("displayLinkAddress","#"),r=r.replace("linkTarget",""),r=r.replace("linkInputText","")):u==="input"&&(r=r.replace("displayLinkAddress","#"),r=r.replace("linkUID",""),r=r.replace("linkTarget",""),r=r.replace("linkInputText",t.Metadata.InputText));l+=r;c!=-1&&i.length>c&&n==i.length-1&&(l+="<\/div>")}),a=VIRTUAL_CHAT.displayLinksTemplate.join("\n"),a=a.replace("displayLinksPlaceHolder",l),s?$(".alme--window--conversation--response--about__message__text").last().append(a):$(".alme--window--conversation--response--alme__message__text").last().append(a),$(".alme--window--conversation--response--alme__message__displayLinks__link a[targettype=unit]").unbind("click"),$(".alme--window--conversation--response--alme__message__displayLinks__link a[targettype=unit]").click(function(n){if(n.preventDefault(),VIRTUAL_CHAT.requestInProgress)return!1;VIRTUAL_CHAT.requestInProgress=!0;VIRTUAL_CHAT.EnableDisableRequests(!1);var t=$(this).attr("linkid"),i=$.trim($(this).text()),r={unitId:t,displayText:i,parameters:{lwp:VIRTUAL_CHAT.readCookie("lwp"),_inUISessionId:VIRTUAL_CHAT.SessionId,Context:{CurrentUrl:VIRTUAL_CHAT.GetPageAwarenessValues()},_inPreviousDisplayLinks:VIRTUAL_CHAT.PreviousDisplayLinks}};agent.getUnit(r)}),$(".alme--window--conversation--response--alme__message__displayLinks__link a[targettype=input]").unbind("click"),$(".alme--window--conversation--response--alme__message__displayLinks__link a[targettype=input]").click(function(n){if(n.preventDefault(),VIRTUAL_CHAT.requestInProgress)return!1;VIRTUAL_CHAT.requestInProgress=!0;VIRTUAL_CHAT.EnableDisableRequests(!1);var t=$(this).attr("inputtext"),i={question:t,parameters:{lwp:VIRTUAL_CHAT.readCookie("lwp"),_inUISessionId:VIRTUAL_CHAT.SessionId,Context:{CurrentUrl:VIRTUAL_CHAT.GetPageAwarenessValues()},_inPreviousDisplayLinks:VIRTUAL_CHAT.PreviousDisplayLinks}};agent.sendInput(i)}),$(".alme--window--conversation--response--alme__message__displayLinks__fold--colapsed .viewMore").unbind("click"),$(".alme--window--conversation--response--alme__message__displayLinks__fold--colapsed .viewMore").click(function(n){n.preventDefault();var t=$(this).parent();$(t).removeClass();$(t).addClass("alme--window--conversation--response--alme__message__displayLinks__fold--expanded")}));$(".alme--window--conversation--response--alme__message__displayLinks__link a").addClass("dellmetrics-masthead");$(".alme--window--conversation--response--alme__message__navigationlink__autoNav a").addClass("dellmetrics-masthead");$(".alme--window--conversation--response--alme__message__displayLinks__link a").data("metrics",{btnname:"virtualchatinteract",ref:"virtualchat",sessionid:VIRTUAL_CHAT.SessionId});$(".alme--window--conversation--response--alme__message__navigationlink__autoNav a").data("metrics",{btnname:"virtualchatinteract",ref:"virtualchat",sessionid:VIRTUAL_CHAT.SessionId})}d=e[0].scrollHeight;p=$(".alme--window--conversation--response--alme").last().outerHeight();s&&(p=$(".alme--window--conversation--response--about").last().outerHeight());e.scrollTop(d-p-15)};h>0?setTimeout(c,h):c()};VIRTUAL_CHAT.navURlActions=function(n,t){var r,u;if(n!=null){r=n.AutoNavigationType.toLowerCase();u=t!=null&&t.length>0&&t[0].Name==="DoNotNavigate";u&&(r=t[0].Metadata.AutoNavigationType.toLowerCase());var f=new RegExp("^http://www\\.dell\\.com"),e=$("<a>").prop("href",n.UrlAddress).prop("hostname"),i=n.UrlAddress;f.test(i)&&(i=n.UrlAddress.replace(e,window.location.host));switch(r){case"mainpage":window.location=i;break;case"popup":window.open(i,"_blank")}}};VIRTUAL_CHAT.agentResponseHandler=function(n){$(".alme--window--footer--inputbox__textarea").val("");VIRTUAL_CHAT.navURlActions(n.navUrl,n.responseActions);VIRTUAL_CHAT.UpdateChatWindow(n.maskedInput,n.text,n.displayLinks,n.navUrl,n.responseActions,n.displayLinkCollection);VIRTUAL_CHAT.requestInProgress=!1;VIRTUAL_CHAT.EnableDisableRequests(!0)};VIRTUAL_CHAT.agentErrorHandler=function(){VIRTUAL_CHAT.EnableDisableRequests(!0)};VIRTUAL_CHAT.SetSessionId=function(){for(var i,f,e,n,u=VIRTUAL_CHAT.readCookie("NIT_SessionState").split("&"),t,r=0;r<u.length;r++)if(i=u[r].split("="),i.length>1&&i[0]=="Session"){t=i[1];break}VIRTUAL_CHAT.SessionId=t;f=$(".alme--window--footer--inputbox__submit").attr("data-metrics").replace("<sessionid>",t);$(".alme--window--footer--inputbox__submit").attr("data-metrics",f);e=$(".alme--window--header--toolbar--minimize").attr("data-metrics").replace("<sessionid>",t);$(".alme--window--header--toolbar--minimize").attr("data-metrics",e);n=$(".alme--window--footer__links .alme--window--footer__links__livechat a").attr("href");n=n&&n.indexOf("?")>-1?n+"&NextITSessionID="+t:n?n+"?NextITSessionID="+t:n;$(".alme--window--footer__links .alme--window--footer__links__livechat a").attr("href",n)};VIRTUAL_CHAT.GetHistory=function(){agent.getConversationHistory().then(function(n){if(VIRTUAL_CHAT.SetSessionId(),n.length<=0){var t={eventName:"WelcomeUser",parameters:{lwp:VIRTUAL_CHAT.readCookie("lwp"),_inUISessionId:VIRTUAL_CHAT.SessionId,Context:{CurrentUrl:VIRTUAL_CHAT.GetPageAwarenessValues()},LaunchPointName:null,LaunchParameter:null,LaunchType:null,_inPreviousDisplayLinks:VIRTUAL_CHAT.PreviousDisplayLinks}};agent.sendAppEvent(t)}$.each(n,function(n,t){VIRTUAL_CHAT.UpdateChatWindow(t.maskedInput,t.text,t.displayLinks,t.navUrl,t.responseActions,t.displayLinkCollection)});VIRTUAL_CHAT.historyLoaded=!0})};$(".alme--window--footer--inputbox__textarea").on("keyup",function(n){n.keyCode==13&&$(".alme--window--footer--inputbox__submit").click()});if($(".alme--window--footer--inputbox__submit").click(function(){VIRTUAL_CHAT.SendVirtualChatQuery()}),$("#nit-alme-window-root").length>0){var appName=$('meta[name="waapplicationname"]').attr("content"),control=$('meta[name="wacontroller"]').attr("content").toLowerCase(),isDellHomePageOrLearn=appName==="dellhomepage"||appName==="Learn"&&control!="learnalienware";isDellHomePageOrLearn||$(document).ready(function(){$.get(serverUrls.apiServiceUrl+"AppResilience/IsAvahealthy",function(n){n&&VIRTUAL_CHAT.Init()}).error(function(){VIRTUAL_CHAT.Init()})})}